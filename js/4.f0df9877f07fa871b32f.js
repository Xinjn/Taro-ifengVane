(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"220":function(e,n,o){"use strict";(function(n){var r=o(27),i=o(283),a=o(284),s=o(285),c=o(288);function camSafeUrlEncode(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}var u,l=function readIntBE(e,n,o){var r=n/8,i=e.slice(o,o+r);return new Uint8Array(i).reverse(),new{"8":Uint8Array,"16":Uint16Array,"32":Uint32Array}[n](i)[0]},d=function buf2str(e,n,o,r){var i=e.slice(n,o),a="";return new Uint8Array(i).forEach((function(e){a+=String.fromCharCode(e)})),r&&(a=decodeURIComponent(escape(a))),a},f=function noop(){},h=function clearKey(e){var n={};for(var o in e)e.hasOwnProperty(o)&&void 0!==e[o]&&null!==e[o]&&(n[o]=e[o]);return n},g=(u=function compareVersion(e,n){e=e.split("."),n=n.split(".");for(var o=0;o<n.length;o++)if(e[o]!==n[o])return parseInt(e[o])>parseInt(n[o])?1:-1;return 0},function check(e){var n=(e.match(/Chrome\/([.\d]+)/)||[])[1],o=(e.match(/QBCore\/([.\d]+)/)||[])[1],r=(e.match(/QQBrowser\/([.\d]+)/)||[])[1];return n&&u(n,"53.0.2785.116")<0&&o&&u(o,"3.53.991.400")<0&&r&&u(r,"9.0.2524.400")<=0||!1}(navigator&&navigator.userAgent));function clone(e){return map(e,(function(e){return"object"===r(e)&&null!==e?clone(e):e}))}function extend(e,n){return each(n,(function(o,r){e[r]=n[r]})),e}function isArray(e){return e instanceof Array}function each(e,n){for(var o in e)e.hasOwnProperty(o)&&n(e[o],o)}function map(e,n){var o=isArray(e)?[]:{};for(var r in e)e.hasOwnProperty(r)&&(o[r]=n(e[r],r));return o}var y=function formatParams(e,n){if(n=extend({},n),"getAuth"!==e&&"getV4Auth"!==e&&"getObjectUrl"!==e){var o=n.Headers||{};if(n&&"object"===r(n)){!function(){for(var e in n)n.hasOwnProperty(e)&&e.indexOf("x-cos-")>-1&&(o[e]=n[e])}();v.each({"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType","Expect":"Expect","Expires":"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding","Range":"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext"},(function(e,r){void 0!==n[e]&&(o[r]=n[e])})),n.Headers=h(o)}}return n},C=function getSkewTime(e){return Date.now()+(e||0)},v={"noop":f,"formatParams":y,"apiWrapper":function apiWrapper(e,n){return function(o,r){var i=this;"function"==typeof o&&(r=o,o={}),o=y(e,o);var a=function formatResult(e){return e&&e.headers&&(e.headers["x-cos-request-id"]&&(e.RequestId=e.headers["x-cos-request-id"]),e.headers["x-cos-version-id"]&&(e.VersionId=e.headers["x-cos-version-id"]),e.headers["x-cos-delete-marker"]&&(e.DeleteMarker=e.headers["x-cos-delete-marker"])),e},s=function _callback(e,n){r&&r(a(e),a(n))},c=function checkParams(){if("getService"!==e&&"abortUploadTask"!==e){var n=function hasMissingParams(e,n){var o=n.Bucket,r=n.Region,i=n.Key;if(e.indexOf("Bucket")>-1||"deleteMultipleObject"===e||"multipartList"===e||"listObjectVersions"===e){if(!o)return"Bucket";if(!r)return"Region"}else if(e.indexOf("Object")>-1||e.indexOf("multipart")>-1||"sliceUploadFile"===e||"abortUploadTask"===e){if(!o)return"Bucket";if(!r)return"Region";if(!i)return"Key"}return!1}(e,o);if(n)return"missing param "+n;if(o.Region){if(o.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(o.Region))return"Region format error.";i.options.CompatibilityMode||-1!==o.Region.indexOf("-")||"yfb"===o.Region||"default"===o.Region||"accelerate"===o.Region||console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(o.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(o.Bucket))if(o.AppId)o.Bucket=o.Bucket+"-"+o.AppId;else{if(!i.options.AppId)return'Bucket should format as "test-1250000000".';o.Bucket=o.Bucket+"-"+i.options.AppId}o.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete o.AppId)}!i.options.UseRawKey&&o.Key&&"/"===o.Key.substr(0,1)&&(o.Key=o.Key.substr(1))}}(),u="getAuth"===e||"getObjectUrl"===e;if(Promise&&!u&&!r)return new Promise((function(e,a){if(r=function callback(n,o){n?a(n):e(o)},c)return s(v.error(new Error(c)));n.call(i,o,s)}));if(c)return s(v.error(new Error(c)));var l=n.call(i,o,s);return u?l:void 0}},"xml2json":s,"json2xml":c,"md5":i,"clearKey":h,"fileSlice":function fileSlice(e,n,o,r,i){var a;if(e.slice?a=e.slice(n,o):e.mozSlice?a=e.mozSlice(n,o):e.webkitSlice&&(a=e.webkitSlice(n,o)),r&&g){var s=new FileReader;s.onload=function(e){a=null,i(new Blob([s.result]))},s.readAsArrayBuffer(a)}else i(a)},"getBodyMd5":function getBodyMd5(e,n,o,r){o=o||f,e?"string"==typeof n?o(v.md5(n,!0)):Blob&&n instanceof Blob?v.getFileMd5(n,(function(e,n){o(n)}),r):o():o()},"getFileMd5":function getFileMd5(e,n,o){var r=e.size,a=0,s=i.getCtx();!function next(i){if(i>=r){var c=s.digest("hex");n(null,c)}else{var u=Math.min(r,i+1048576);v.fileSlice(e,i,u,!1,(function(e){!function readAsBinaryString(e,n){var o,r=new FileReader;FileReader.prototype.readAsBinaryString?(o=FileReader.prototype.readAsBinaryString,r.onload=function(){n(this.result)}):FileReader.prototype.readAsArrayBuffer?o=function readFun(e){var o="",r=new FileReader;r.onload=function(e){for(var i=new Uint8Array(r.result),a=i.byteLength,s=0;s<a;s++)o+=String.fromCharCode(i[s]);n(o)},r.readAsArrayBuffer(e)}:console.error("FileReader not support readAsBinaryString"),o.call(r,e)}(e,(function(n){e=null,s=s.update(n,!0),a+=n.length,n=null,o&&o({"loaded":a,"total":r,"percent":Math.round(a/r*1e4)/1e4}),next(i+1048576)}))}))}}(0)},"binaryBase64":function binaryBase64(e){var n,o,r,i="";for(n=0,o=e.length/2;n<o;n++)r=parseInt(e[2*n]+e[2*n+1],16),i+=String.fromCharCode(r);return btoa(i)},"extend":extend,"isArray":isArray,"isInArray":function isInArray(e,n){for(var o=!1,r=0;r<e.length;r++)if(n===e[r]){o=!0;break}return o},"makeArray":function makeArray(e){return isArray(e)?e:[e]},"each":each,"map":map,"filter":function filter(e,n){var o=isArray(e),r=o?[]:{};for(var i in e)e.hasOwnProperty(i)&&n(e[i],i)&&(o?r.push(e[i]):r[i]=e[i]);return r},"clone":clone,"attr":function attr(e,n,o){return e&&n in e?e[n]:o},"uuid":function uuid(){var e=function S4(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},"camSafeUrlEncode":camSafeUrlEncode,"throttleOnProgress":function throttleOnProgress(e,n){var o,r,i=this,a=0,s=0,c=Date.now();function update(){if(r=0,n&&"function"==typeof n){o=Date.now();var i,u=Math.max(0,Math.round((s-a)/((o-c)/1e3)*100)/100)||0;i=0===s&&0===e?1:Math.floor(s/e*100)/100||0,c=o,a=s;try{n({"loaded":s,"total":e,"speed":u,"percent":i})}catch(e){}}}return function(n,o){if(n&&(s=n.loaded,e=n.total),o)clearTimeout(r),update();else{if(r)return;r=setTimeout(update,i.options.ProgressInterval)}}},"getFileSize":function getFileSize(e,n,o){var r;"string"==typeof n.Body?n.Body=new Blob([n.Body],{"type":"text/plain"}):n.Body instanceof ArrayBuffer&&(n.Body=new Blob([n.Body])),n.Body&&(n.Body instanceof Blob||"[object File]"===n.Body.toString()||"[object Blob]"===n.Body.toString())?(r=n.Body.size,n.ContentLength=r,o(null,r)):o(v.error(new Error("params body format error, Only allow File|Blob|String.")))},"getSkewTime":C,"error":function error(e,n){var o=e;return e.message=e.message||null,"string"==typeof n?(e.error=n,e.message=n):"object"===r(n)&&null!==n&&(extend(e,n),(n.code||n.name)&&(e.code=n.code||n.name),n.message&&(e.message=n.message),n.stack&&(e.stack=n.stack)),"function"==typeof Object.defineProperty&&(Object.defineProperty(e,"name",{"writable":!0,"enumerable":!1}),Object.defineProperty(e,"message",{"enumerable":!0})),e.name=n&&n.name||e.name||e.code||"Error",e.code||(e.code=e.name),e.error||(e.error=clone(o)),e},"getAuth":function getAuth(e){var n,o=(e=e||{}).SecretId,r=e.SecretKey,i=e.KeyTime,s=(e.method||e.Method||"get").toLowerCase(),c=clone(e.Query||e.params||{}),u=clone(e.Headers||e.headers||{}),l=e.Key||"";if(e.UseRawKey?n=e.Pathname||e.pathname||"/"+l:0!==(n=e.Pathname||e.pathname||l).indexOf("/")&&(n="/"+n),!o)throw new Error("missing param SecretId");if(!r)throw new Error("missing param SecretKey");var d=function getObjectKeys(e,n){var o=[];for(var r in e)e.hasOwnProperty(r)&&o.push(n?camSafeUrlEncode(r).toLowerCase():r);return o.sort((function(e,n){return(e=e.toLowerCase())===(n=n.toLowerCase())?0:e>n?1:-1}))},f=function obj2str(e){var n,o,r,i=[],a=d(e);for(n=0;n<a.length;n++)r=void 0===e[o=a[n]]||null===e[o]?"":""+e[o],o=camSafeUrlEncode(o).toLowerCase(),r=camSafeUrlEncode(r)||"",i.push(o+"="+r);return i.join("&")},h=Math.round(C(e.SystemClockOffset)/1e3)-1,g=h,y=e.Expires||e.expires;g+=void 0===y?900:1*y||0;var v=o,k=i||h+";"+g,R=i||h+";"+g,S=d(u).join(";").toLowerCase(),b=d(c).join(";").toLowerCase(),A=a.HmacSHA1(R,r).toString(),B=[s,n,f(c),f(u),""].join("\n"),T=["sha1",k,a.SHA1(B).toString(),""].join("\n");return["q-sign-algorithm=sha1","q-ak="+v,"q-sign-time="+k,"q-key-time="+R,"q-header-list="+S,"q-url-param-list="+b,"q-signature="+a.HmacSHA1(T,A).toString()].join("&")},"parseSelectPayload":function parseSelectPayload(e){for(var n={},o=d(e),r={"records":[]};e.byteLength;){var i,a=l(e,32,0),s=l(e,32,4),c=a-s-16,u=0;for(e=e.slice(12);u<s;){var f=l(e,8,u),h=d(e,u+1,u+1+f),g=l(e,16,u+f+2),y=d(e,u+f+4,u+f+4+g);n[h]=y,u+=f+4+g}if("Records"===n[":event-type"])i=d(e,u,u+c,!0),r.records.push(i);else if("Stats"===n[":event-type"])i=d(e,u,u+c,!0),r.stats=v.xml2json(i).Stats;else if("error"===n[":event-type"]){var C=n[":error-code"],k=n[":error-message"],R=new Error(k);R.message=k,R.name=R.code=C,r.error=R}else["Progress","Continuation","End"].includes(n[":event-type"]);e=e.slice(u+c+4)}return{"payload":r.records.join(""),"body":o}},"isBrowser":!0,"isNode":function isNode(){return"object"!==("undefined"==typeof window?"undefined":r(window))&&"object"===(void 0===n?"undefined":r(n))&&!0}};e.exports=v}).call(this,o(58))},"230":function(e,n,o){"use strict";var r=this&&this.__awaiter||function(e,n,o,r){return new(o||(o=Promise))((function(i,a){function fulfilled(e){try{step(r.next(e))}catch(e){a(e)}}function rejected(e){try{step(r.throw(e))}catch(e){a(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof o?e:new o((function(n){n(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var o,r,i,a,s={"label":0,"sent":function sent(){if(1&i[0])throw i[1];return i[1]},"trys":[],"ops":[]};return a={"next":verb(0),"throw":verb(1),"return":verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(a){return function(c){return function step(a){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{"value":a[1],"done":!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(e){a=[6,e],r=0}finally{o=i=0}if(5&a[0])throw a[1];return{"value":a[0]?a[1]:void 0,"done":!0}}([a,c])}}};Object.defineProperty(n,"__esModule",{"value":!0}),n.generateGuid=n.generateKey=n.getFileSuffix=n.isVideo=n.isImage=n.Core=void 0;var a=o(281);function getFileSuffix(e){return e.split("/")[1]}function isImage(e){return/^image*/.test(e.type)}function isVideo(e){return/^video*/.test(e.type)}function generateKey(e){return r(this,void 0,void 0,(function(){var n,o;return i(this,(function(r){switch(r.label){case 0:return isImage(e)?(n=URL.createObjectURL(e),[4,(i=n,new Promise((function(e){var n=new Image;n.src=i,n.onload=function(){e({"width":n.width,"height":n.height})}})))]):[3,2];case 1:return o=r.sent(),URL.revokeObjectURL(n),o?[2,"img/"+generateGuid(e)+"_w"+o.width+"_h"+o.height+"."+getFileSuffix(e.type)]:[2,"img/"+generateGuid(e)+"."+getFileSuffix(e.type)];case 2:return isVideo(e)?[2,"video/"+generateGuid(e)+"."+getFileSuffix(e.type)]:[2,generateGuid(e)+"."+getFileSuffix(e.type)];case 3:return[2]}var i}))}))}function generateGuid(e){var n=new Date,o=URL.createObjectURL(e),r=o.substring(o.length-36);return URL.revokeObjectURL(o),n.toLocaleDateString()+"/"+r}n.getFileSuffix=getFileSuffix,n.isImage=isImage,n.isVideo=isVideo,n.generateKey=generateKey,n.generateGuid=generateGuid;var s=function(){function Core(e){this.appid=e.appid,this.token=e.token,this.Bucket=e.bucket||"ifeng-cos-ugc-upload-1300722751",this.Region=e.region||"ap-beijing",this.apiUrl=e.apiUrl||"https://skserver.ifeng.com/cos/getCredential",this.cos=null,this.initFail=e.initFail,this.init(),this.urlPrefix=""}return Core.prototype.init=function(){var e=this;this.cos=new a({"getAuthorization":function getAuthorization(n,o){try{var r=new FormData,i=new XMLHttpRequest;i.open("POST",e.apiUrl,!0),i.onreadystatechange=function(){if(4===i.readyState)if(i.status>=200&&i.status<300||304===i.status)try{var n=new Function("return "+i.responseText)();0===n.code?(e.urlPrefix=n.data.urlPrefix,o({"TmpSecretId":n.data.credentials.tmpSecretId,"TmpSecretKey":n.data.credentials.tmpSecretKey,"XCosSecurityToken":n.data.credentials.sessionToken,"StartTime":n.data.startTime,"ExpiredTime":n.data.expiredTime})):e.initFail&&e.initFail(n.msg)}catch(n){e.initFail&&e.initFail("获取签名失败，请刷新重试")}else e.initFail&&e.initFail("获取签名失败，请刷新重试")},r.append("appId",e.appid),r.append("token",e.token),i.send(r)}catch(n){e.initFail&&e.initFail("获取签名失败，请刷新重试")}}})},Core.prototype.uploadFile=function(e){var n=e.file,o=e.key,a=e.success,s=e.error,c=e.progress,u=e.options;return r(this,void 0,void 0,(function(){var e,r,l,d,f,h,g,y;return i(this,(function(i){switch(i.label){case 0:return(e=o)?[3,2]:[4,generateKey(n)];case 1:e=i.sent(),i.label=2;case 2:return o=e,r=this,d=(l=u||{}).needAutoOrient,f=void 0!==d&&d,h=l.Headers,g=void 0===h?{}:h,y=f?{"Pic-Operations":'{"rules": [{"fileid": "/'+o+'", "rule": "imageMogr2/auto-orient"}]}'}:{},this.cos.putObject({"Bucket":this.Bucket,"Region":this.Region,"Key":o,"Body":n,"Headers":Object.assign(y,g),"onProgress":function onProgress(e){c&&c(e)}},(function(e){e?s&&s(e):a&&a({"sourcePath":r.urlPrefix+"/"+o,"key":o})})),[2]}}))}))},Core.prototype.uploadBigFile=function(e){var n=e.file,o=e.key,a=e.success,s=e.error,c=e.progress,u=e.options;return r(this,void 0,void 0,(function(){var e,r,l,d,f,h,g,y;return i(this,(function(i){switch(i.label){case 0:return e=this,(r=o)?[3,2]:[4,generateKey(n)];case 1:r=i.sent(),i.label=2;case 2:return o=r,d=(l=u||{}).needAutoOrient,f=void 0!==d&&d,h=l.Headers,g=void 0===h?{}:h,y=f?{"Pic-Operations":'{"rules": [{"fileid": "/'+o+'", "rule": "imageMogr2/auto-orient"}]}'}:{},[2,new Promise((function(r){e.cos.sliceUploadFile({"Bucket":e.Bucket,"Region":e.Region,"Key":o,"Body":n,"Headers":Object.assign(y,g),"onTaskReady":function onTaskReady(n){r({"abort":function abort(){e.cos.cancelTask(n)},"restart":function restart(){e.cos.restartTask(n)},"pause":function pause(){e.cos.pauseTask(n)}})},"onProgress":function onProgress(e){c&&c(e)}},(function(n){n?s&&s(n):a&&a({"sourcePath":e.urlPrefix+"/"+o,"key":"/"+o})}))}))]}}))}))},Core}();n.Core=s},"237":function(e,n,o){var r=o(27);function copy(e,n){for(var o in e)n[o]=e[o]}function _extends(e,n){var o=e.prototype;if(Object.create){var r=Object.create(n.prototype);o.__proto__=r}if(!(o instanceof n)){var i=function t(){};i.prototype=n.prototype,copy(o,i=new i),e.prototype=o=i}o.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),o.constructor=e)}var i={},a=i.ELEMENT_NODE=1,s=i.ATTRIBUTE_NODE=2,c=i.TEXT_NODE=3,u=i.CDATA_SECTION_NODE=4,l=i.ENTITY_REFERENCE_NODE=5,d=i.ENTITY_NODE=6,f=i.PROCESSING_INSTRUCTION_NODE=7,h=i.COMMENT_NODE=8,g=i.DOCUMENT_NODE=9,y=i.DOCUMENT_TYPE_NODE=10,C=i.DOCUMENT_FRAGMENT_NODE=11,v=i.NOTATION_NODE=12,k={},R={},S=(k.INDEX_SIZE_ERR=(R[1]="Index size error",1),k.DOMSTRING_SIZE_ERR=(R[2]="DOMString size error",2),k.HIERARCHY_REQUEST_ERR=(R[3]="Hierarchy request error",3)),b=(k.WRONG_DOCUMENT_ERR=(R[4]="Wrong document",4),k.INVALID_CHARACTER_ERR=(R[5]="Invalid character",5),k.NO_DATA_ALLOWED_ERR=(R[6]="No data allowed",6),k.NO_MODIFICATION_ALLOWED_ERR=(R[7]="No modification allowed",7),k.NOT_FOUND_ERR=(R[8]="Not found",8)),A=(k.NOT_SUPPORTED_ERR=(R[9]="Not supported",9),k.INUSE_ATTRIBUTE_ERR=(R[10]="Attribute in use",10));k.INVALID_STATE_ERR=(R[11]="Invalid state",11),k.SYNTAX_ERR=(R[12]="Syntax error",12),k.INVALID_MODIFICATION_ERR=(R[13]="Invalid modification",13),k.NAMESPACE_ERR=(R[14]="Invalid namespace",14),k.INVALID_ACCESS_ERR=(R[15]="Invalid access",15);function DOMException(e,n){if(n instanceof Error)var o=n;else o=this,Error.call(this,R[e]),this.message=R[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return o.code=e,n&&(this.message=this.message+": "+n),o}function NodeList(){}function LiveNodeList(e,n){this._node=e,this._refresh=n,_updateLiveList(this)}function _updateLiveList(e){var n=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=n){var o=e._refresh(e._node);__set__(e,"length",o.length),copy(o,e),e._inc=n}}function NamedNodeMap(){}function _findNodeIndex(e,n){for(var o=e.length;o--;)if(e[o]===n)return o}function _addNamedNode(e,n,o,r){if(r?n[_findNodeIndex(n,r)]=o:n[n.length++]=o,e){o.ownerElement=e;var i=e.ownerDocument;i&&(r&&_onRemoveAttribute(i,e,r),function _onAddAttribute(e,n,o){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==o.namespaceURI&&(n._nsMap[o.prefix?o.localName:""]=o.value)}(i,e,o))}}function _removeNamedNode(e,n,o){var r=_findNodeIndex(n,o);if(!(r>=0))throw DOMException(b,new Error(e.tagName+"@"+o));for(var i=n.length-1;r<i;)n[r]=n[++r];if(n.length=i,e){var a=e.ownerDocument;a&&(_onRemoveAttribute(a,e,o),o.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var n in e)this._features=e[n]}function Node(){}function _xmlEncoder(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,n){if(n(e))return!0;if(e=e.firstChild)do{if(_visitNode(e,n))return!0}while(e=e.nextSibling)}function Document(){}function _onRemoveAttribute(e,n,o,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==o.namespaceURI&&delete n._nsMap[o.prefix?o.localName:""]}function _onUpdateChild(e,n,o){if(e&&e._inc){e._inc++;var r=n.childNodes;if(o)r[r.length++]=o;else{for(var i=n.firstChild,a=0;i;)r[a++]=i,i=i.nextSibling;r.length=a}}}function _removeChild(e,n){var o=n.previousSibling,r=n.nextSibling;return o?o.nextSibling=r:e.firstChild=r,r?r.previousSibling=o:e.lastChild=o,_onUpdateChild(e.ownerDocument,e),n}function _insertBefore(e,n,o){var r=n.parentNode;if(r&&r.removeChild(n),n.nodeType===C){var i=n.firstChild;if(null==i)return n;var a=n.lastChild}else i=a=n;var s=o?o.previousSibling:e.lastChild;i.previousSibling=s,a.nextSibling=o,s?s.nextSibling=i:e.firstChild=i,null==o?e.lastChild=a:o.previousSibling=a;do{i.parentNode=e}while(i!==a&&(i=i.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),n.nodeType==C&&(n.firstChild=n.lastChild=null),n}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(e,n){var o=[],r=9==this.nodeType?this.documentElement:this,i=r.prefix,a=r.namespaceURI;if(a&&null==i&&null==(i=r.lookupPrefix(a)))var s=[{"namespace":a,"prefix":null}];return serializeToString(this,o,e,n,s),o.join("")}function needNamespaceDefine(e,n,o){var r=e.prefix||"",i=e.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var a=o.length;a--;){var s=o[a];if(s.prefix==r)return s.namespace!=i}return!0}function serializeToString(e,n,o,r,i){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void n.push(e)}switch(e.nodeType){case a:i||(i=[]);i.length;var d=e.attributes,v=d.length,k=e.firstChild,R=e.tagName;o="http://www.w3.org/1999/xhtml"===e.namespaceURI||o,n.push("<",R);for(var S=0;S<v;S++){"xmlns"==(b=d.item(S)).prefix?i.push({"prefix":b.localName,"namespace":b.value}):"xmlns"==b.nodeName&&i.push({"prefix":"","namespace":b.value})}for(S=0;S<v;S++){var b;if(needNamespaceDefine(b=d.item(S),0,i)){var A=b.prefix||"",B=b.namespaceURI,T=A?" xmlns:"+A:" xmlns";n.push(T,'="',B,'"'),i.push({"prefix":A,"namespace":B})}serializeToString(b,n,o,r,i)}if(needNamespaceDefine(e,0,i)){A=e.prefix||"",B=e.namespaceURI,T=A?" xmlns:"+A:" xmlns";n.push(T,'="',B,'"'),i.push({"prefix":A,"namespace":B})}if(k||o&&!/^(?:meta|link|img|br|hr|input)$/i.test(R)){if(n.push(">"),o&&/^script$/i.test(R))for(;k;)k.data?n.push(k.data):serializeToString(k,n,o,r,i),k=k.nextSibling;else for(;k;)serializeToString(k,n,o,r,i),k=k.nextSibling;n.push("</",R,">")}else n.push("/>");return;case g:case C:for(k=e.firstChild;k;)serializeToString(k,n,o,r,i),k=k.nextSibling;return;case s:return n.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case c:return n.push(e.data.replace(/[<&]/g,_xmlEncoder));case u:return n.push("<![CDATA[",e.data,"]]>");case h:return n.push("\x3c!--",e.data,"--\x3e");case y:var _=e.publicId,x=e.systemId;if(n.push("<!DOCTYPE ",e.name),_)n.push(' PUBLIC "',_),x&&"."!=x&&n.push('" "',x),n.push('">');else if(x&&"."!=x)n.push(' SYSTEM "',x,'">');else{var E=e.internalSubset;E&&n.push(" [",E,"]"),n.push(">")}return;case f:return n.push("<?",e.target," ",e.data,"?>");case l:return n.push("&",e.nodeName,";");default:n.push("??",e.nodeName)}}function __set__(e,n,o){e[n]=o}DOMException.prototype=Error.prototype,copy(k,DOMException),NodeList.prototype={"length":0,"item":function item(e){return this[e]||null},"toString":function toString(e,n){for(var o=[],r=0;r<this.length;r++)serializeToString(this[r],o,e,n);return o.join("")}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={"length":0,"item":NodeList.prototype.item,"getNamedItem":function getNamedItem(e){for(var n=this.length;n--;){var o=this[n];if(o.nodeName==e)return o}},"setNamedItem":function setNamedItem(e){var n=e.ownerElement;if(n&&n!=this._ownerElement)throw new DOMException(A);var o=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,o),o},"setNamedItemNS":function setNamedItemNS(e){var n,o=e.ownerElement;if(o&&o!=this._ownerElement)throw new DOMException(A);return n=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,n),n},"removeNamedItem":function removeNamedItem(e){var n=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,n),n},"removeNamedItemNS":function removeNamedItemNS(e,n){var o=this.getNamedItemNS(e,n);return _removeNamedNode(this._ownerElement,this,o),o},"getNamedItemNS":function getNamedItemNS(e,n){for(var o=this.length;o--;){var r=this[o];if(r.localName==n&&r.namespaceURI==e)return r}return null}},DOMImplementation.prototype={"hasFeature":function hasFeature(e,n){var o=this._features[e.toLowerCase()];return!(!o||n&&!(n in o))},"createDocument":function createDocument(e,n,o){var r=new Document;if(r.implementation=this,r.childNodes=new NodeList,r.doctype=o,o&&r.appendChild(o),n){var i=r.createElementNS(e,n);r.appendChild(i)}return r},"createDocumentType":function createDocumentType(e,n,o){var r=new DocumentType;return r.name=e,r.nodeName=e,r.publicId=n,r.systemId=o,r}},Node.prototype={"firstChild":null,"lastChild":null,"previousSibling":null,"nextSibling":null,"attributes":null,"parentNode":null,"childNodes":null,"ownerDocument":null,"nodeValue":null,"namespaceURI":null,"prefix":null,"localName":null,"insertBefore":function insertBefore(e,n){return _insertBefore(this,e,n)},"replaceChild":function replaceChild(e,n){this.insertBefore(e,n),n&&this.removeChild(n)},"removeChild":function removeChild(e){return _removeChild(this,e)},"appendChild":function appendChild(e){return this.insertBefore(e,null)},"hasChildNodes":function hasChildNodes(){return null!=this.firstChild},"cloneNode":function cloneNode(e){return function _cloneNode(e,n,o){var i=new n.constructor;for(var c in n){var u=n[c];"object"!=r(u)&&u!=i[c]&&(i[c]=u)}n.childNodes&&(i.childNodes=new NodeList);switch(i.ownerDocument=e,i.nodeType){case a:var l=n.attributes,d=i.attributes=new NamedNodeMap,f=l.length;d._ownerElement=i;for(var h=0;h<f;h++)i.setAttributeNode(_cloneNode(e,l.item(h),!0));break;case s:o=!0}if(o)for(var g=n.firstChild;g;)i.appendChild(_cloneNode(e,g,o)),g=g.nextSibling;return i}(this.ownerDocument||this,this,e)},"normalize":function normalize(){for(var e=this.firstChild;e;){var n=e.nextSibling;n&&n.nodeType==c&&e.nodeType==c?(this.removeChild(n),e.appendData(n.data)):(e.normalize(),e=n)}},"isSupported":function isSupported(e,n){return this.ownerDocument.implementation.hasFeature(e,n)},"hasAttributes":function hasAttributes(){return this.attributes.length>0},"lookupPrefix":function lookupPrefix(e){for(var n=this;n;){var o=n._nsMap;if(o)for(var r in o)if(o[r]==e)return r;n=n.nodeType==s?n.ownerDocument:n.parentNode}return null},"lookupNamespaceURI":function lookupNamespaceURI(e){for(var n=this;n;){var o=n._nsMap;if(o&&e in o)return o[e];n=n.nodeType==s?n.ownerDocument:n.parentNode}return null},"isDefaultNamespace":function isDefaultNamespace(e){return null==this.lookupPrefix(e)}},copy(i,Node),copy(i,Node.prototype),Document.prototype={"nodeName":"#document","nodeType":g,"doctype":null,"documentElement":null,"_inc":1,"insertBefore":function insertBefore(e,n){if(e.nodeType==C){for(var o=e.firstChild;o;){var r=o.nextSibling;this.insertBefore(o,n),o=r}return e}return null==this.documentElement&&e.nodeType==a&&(this.documentElement=e),_insertBefore(this,e,n),e.ownerDocument=this,e},"removeChild":function removeChild(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},"importNode":function importNode(e,n){return function _importNode(e,n,o){var r;switch(n.nodeType){case a:(r=n.cloneNode(!1)).ownerDocument=e;case C:break;case s:o=!0}r||(r=n.cloneNode(!1));if(r.ownerDocument=e,r.parentNode=null,o)for(var i=n.firstChild;i;)r.appendChild(_importNode(e,i,o)),i=i.nextSibling;return r}(this,e,n)},"getElementById":function getElementById(e){var n=null;return _visitNode(this.documentElement,(function(o){if(o.nodeType==a&&o.getAttribute("id")==e)return n=o,!0})),n},"createElement":function createElement(e){var n=new Element;return n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.childNodes=new NodeList,(n.attributes=new NamedNodeMap)._ownerElement=n,n},"createDocumentFragment":function createDocumentFragment(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},"createTextNode":function createTextNode(e){var n=new Text;return n.ownerDocument=this,n.appendData(e),n},"createComment":function createComment(e){var n=new Comment;return n.ownerDocument=this,n.appendData(e),n},"createCDATASection":function createCDATASection(e){var n=new CDATASection;return n.ownerDocument=this,n.appendData(e),n},"createProcessingInstruction":function createProcessingInstruction(e,n){var o=new ProcessingInstruction;return o.ownerDocument=this,o.tagName=o.target=e,o.nodeValue=o.data=n,o},"createAttribute":function createAttribute(e){var n=new Attr;return n.ownerDocument=this,n.name=e,n.nodeName=e,n.localName=e,n.specified=!0,n},"createEntityReference":function createEntityReference(e){var n=new EntityReference;return n.ownerDocument=this,n.nodeName=e,n},"createElementNS":function createElementNS(e,n){var o=new Element,r=n.split(":"),i=o.attributes=new NamedNodeMap;return o.childNodes=new NodeList,o.ownerDocument=this,o.nodeName=n,o.tagName=n,o.namespaceURI=e,2==r.length?(o.prefix=r[0],o.localName=r[1]):o.localName=n,i._ownerElement=o,o},"createAttributeNS":function createAttributeNS(e,n){var o=new Attr,r=n.split(":");return o.ownerDocument=this,o.nodeName=n,o.name=n,o.namespaceURI=e,o.specified=!0,2==r.length?(o.prefix=r[0],o.localName=r[1]):o.localName=n,o}},_extends(Document,Node),Element.prototype={"nodeType":a,"hasAttribute":function hasAttribute(e){return null!=this.getAttributeNode(e)},"getAttribute":function getAttribute(e){var n=this.getAttributeNode(e);return n&&n.value||""},"getAttributeNode":function getAttributeNode(e){return this.attributes.getNamedItem(e)},"setAttribute":function setAttribute(e,n){var o=this.ownerDocument.createAttribute(e);o.value=o.nodeValue=""+n,this.setAttributeNode(o)},"removeAttribute":function removeAttribute(e){var n=this.getAttributeNode(e);n&&this.removeAttributeNode(n)},"appendChild":function appendChild(e){return e.nodeType===C?this.insertBefore(e,null):function _appendSingleChild(e,n){var o=n.parentNode;if(o){var r=e.lastChild;o.removeChild(n);r=e.lastChild}return r=e.lastChild,n.parentNode=e,n.previousSibling=r,n.nextSibling=null,r?r.nextSibling=n:e.firstChild=n,e.lastChild=n,_onUpdateChild(e.ownerDocument,e,n),n}(this,e)},"setAttributeNode":function setAttributeNode(e){return this.attributes.setNamedItem(e)},"setAttributeNodeNS":function setAttributeNodeNS(e){return this.attributes.setNamedItemNS(e)},"removeAttributeNode":function removeAttributeNode(e){return this.attributes.removeNamedItem(e.nodeName)},"removeAttributeNS":function removeAttributeNS(e,n){var o=this.getAttributeNodeNS(e,n);o&&this.removeAttributeNode(o)},"hasAttributeNS":function hasAttributeNS(e,n){return null!=this.getAttributeNodeNS(e,n)},"getAttributeNS":function getAttributeNS(e,n){var o=this.getAttributeNodeNS(e,n);return o&&o.value||""},"setAttributeNS":function setAttributeNS(e,n,o){var r=this.ownerDocument.createAttributeNS(e,n);r.value=r.nodeValue=""+o,this.setAttributeNode(r)},"getAttributeNodeNS":function getAttributeNodeNS(e,n){return this.attributes.getNamedItemNS(e,n)},"getElementsByTagName":function getElementsByTagName(e){return new LiveNodeList(this,(function(n){var o=[];return _visitNode(n,(function(r){r===n||r.nodeType!=a||"*"!==e&&r.tagName!=e||o.push(r)})),o}))},"getElementsByTagNameNS":function getElementsByTagNameNS(e,n){return new LiveNodeList(this,(function(o){var r=[];return _visitNode(o,(function(i){i===o||i.nodeType!==a||"*"!==e&&i.namespaceURI!==e||"*"!==n&&i.localName!=n||r.push(i)})),r}))}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=s,_extends(Attr,Node),CharacterData.prototype={"data":"","substringData":function substringData(e,n){return this.data.substring(e,e+n)},"appendData":function appendData(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},"insertData":function insertData(e,n){this.replaceData(e,0,n)},"appendChild":function appendChild(e){throw new Error(R[S])},"deleteData":function deleteData(e,n){this.replaceData(e,n,"")},"replaceData":function replaceData(e,n,o){o=this.data.substring(0,e)+o+this.data.substring(e+n),this.nodeValue=this.data=o,this.length=o.length}},_extends(CharacterData,Node),Text.prototype={"nodeName":"#text","nodeType":c,"splitText":function splitText(e){var n=this.data,o=n.substring(e);n=n.substring(0,e),this.data=this.nodeValue=n,this.length=n.length;var r=this.ownerDocument.createTextNode(o);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},_extends(Text,CharacterData),Comment.prototype={"nodeName":"#comment","nodeType":h},_extends(Comment,CharacterData),CDATASection.prototype={"nodeName":"#cdata-section","nodeType":u},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=y,_extends(DocumentType,Node),Notation.prototype.nodeType=v,_extends(Notation,Node),Entity.prototype.nodeType=d,_extends(Entity,Node),EntityReference.prototype.nodeType=l,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=C,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=f,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(e,n,o){return nodeSerializeToString.call(e,n,o)},Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){Object.defineProperty(LiveNodeList.prototype,"length",{"get":function get(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{"get":function get(){return function getTextContent(e){switch(e.nodeType){case a:case C:var n=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&n.push(getTextContent(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}}(this)},"set":function set(e){switch(this.nodeType){case a:case C:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),__set__=function __set__(e,n,o){e["$$"+n]=o}}}catch(e){}n.DOMImplementation=DOMImplementation,n.XMLSerializer=XMLSerializer},"238":function(e,n){var o=function initEvent(e){var n={},o=function getList(e){return!n[e]&&(n[e]=[]),n[e]};e.on=function(e,n){"task-list-update"===e&&console.warn('warning: Event "'+e+'" has been deprecated. Please use "list-update" instead.'),o(e).push(n)},e.off=function(e,n){for(var r=o(e),i=r.length-1;i>=0;i--)n===r[i]&&r.splice(i,1)},e.emit=function(e,n){for(var r=o(e).map((function(e){return e})),i=0;i<r.length;i++)r[i](n)}};e.exports.init=o,e.exports.EventProxy=function EventProxy(){o(this)}},"239":function(e,n,o){var r,i,a=o(220),s=function getCache(){try{var e=JSON.parse(localStorage.getItem("cos_sdk_upload_cache"))}catch(e){}e||(e=[]),r=e},c=function setCache(){try{localStorage.setItem("cos_sdk_upload_cache",JSON.stringify(r))}catch(e){}},u=function init(){if(!r){s.call(this);for(var e=!1,n=Math.round(Date.now()/1e3),o=r.length-1;o>=0;o--){var i=r[o][2];(!i||i+2592e3<n)&&(r.splice(o,1),e=!0)}e&&c()}},l=function save(){i||(i=setTimeout((function(){c(),i=null}),400))},d={"using":{},"setUsing":function setUsing(e){d.using[e]=!0},"removeUsing":function removeUsing(e){delete d.using[e]},"getFileId":function getFileId(e,n,o,r){return e.name&&e.size&&e.lastModifiedDate&&n?a.md5([e.name,e.size,e.lastModifiedDate,n,o,r].join("::")):null},"getUploadIdList":function getUploadIdList(e){if(!e)return null;u.call(this);for(var n=[],o=0;o<r.length;o++)r[o][0]===e&&n.push(r[o][1]);return n.length?n:null},"saveUploadId":function saveUploadId(e,n,o){if(u.call(this),e){for(var i=r.length-1;i>=0;i--){var a=r[i];a[0]===e&&a[1]===n&&r.splice(i,1)}r.unshift([e,n,Math.round(Date.now()/1e3)]),r.length>o&&r.splice(o),l()}},"removeUploadId":function removeUploadId(e){u.call(this),delete d.using[e];for(var n=r.length-1;n>=0;n--)r[n][1]===e&&r.splice(n,1);l()}};e.exports=d},"281":function(e,n,o){var r=o(282);e.exports=r},"282":function(e,n,o){"use strict";var r=o(220),i=o(238),a=o(289),s=o(290),c=o(292),u={"AppId":"","SecretId":"","SecretKey":"","SecurityToken":"","ChunkRetryTimes":2,"FileParallelLimit":3,"ChunkParallelLimit":3,"ChunkSize":1048576,"SliceSize":1048576,"CopyChunkParallelLimit":20,"CopyChunkSize":10485760,"CopySliceSize":10485760,"MaxPartNumber":1e4,"ProgressInterval":1e3,"Domain":"","ServiceDomain":"","Protocol":"","CompatibilityMode":!1,"ForcePathStyle":!1,"UseRawKey":!1,"Timeout":0,"CorrectClockSkew":!0,"SystemClockOffset":0,"UploadCheckContentMd5":!1,"UploadQueueSize":1e4,"UploadAddMetaMd5":!1,"UploadIdCacheLimit":50,"UseAccelerate":!1},l=function COS(e){this.options=r.extend(r.clone(u),e||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1048576,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1048576,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),r.isNode()&&(console.warn("warning: cos-js-sdk-v5 不支持 nodejs 环境使用，请改用 cos-nodejs-sdk-v5，参考文档： https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),i.init(this),a.init(this)};s.init(l,a),c.init(l,a),l.getAuthorization=r.getAuth,l.version="1.2.10",e.exports=l},"283":function(module,exports,__webpack_require__){(function(process,global,module){var __WEBPACK_AMD_DEFINE_RESULT__,_typeof=__webpack_require__(27);!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"===("undefined"==typeof window?"undefined":_typeof(window)),root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"===("undefined"==typeof self?"undefined":_typeof(self)),NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"===(void 0===process?"undefined":_typeof(process))&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"===_typeof(module)&&module.exports,AMD=__webpack_require__(148),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===_typeof(e)&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function createOutputMethod(e){return function(n,o){return new Md5(!0).update(n,o)[e]()}},createMethod=function createMethod(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.getCtx=e.create=function(){return new Md5},e.update=function(n){return e.create().update(n)};for(var n=0;n<OUTPUT_TYPES.length;++n){var o=OUTPUT_TYPES[n];e[o]=createOutputMethod(o)}return e},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function nodeMethod(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var n=new ArrayBuffer(68);this.buffer8=new Uint8Array(n),this.blocks=new Uint32Array(n)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e,n){if(!this.finalized){for(var o,r,i=0,a=e.length,s=this.blocks,c=this.buffer8;i<a;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),ARRAY_BUFFER)for(r=this.start;i<a&&r<64;++i)o=e.charCodeAt(i),n||o<128?c[r++]=o:o<2048?(c[r++]=192|o>>6,c[r++]=128|63&o):o<55296||o>=57344?(c[r++]=224|o>>12,c[r++]=128|o>>6&63,c[r++]=128|63&o):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++i)),c[r++]=240|o>>18,c[r++]=128|o>>12&63,c[r++]=128|o>>6&63,c[r++]=128|63&o);else for(r=this.start;i<a&&r<64;++i)o=e.charCodeAt(i),n||o<128?s[r>>2]|=o<<SHIFT[3&r++]:o<2048?(s[r>>2]|=(192|o>>6)<<SHIFT[3&r++],s[r>>2]|=(128|63&o)<<SHIFT[3&r++]):o<55296||o>=57344?(s[r>>2]|=(224|o>>12)<<SHIFT[3&r++],s[r>>2]|=(128|o>>6&63)<<SHIFT[3&r++],s[r>>2]|=(128|63&o)<<SHIFT[3&r++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++i)),s[r>>2]|=(240|o>>18)<<SHIFT[3&r++],s[r>>2]|=(128|o>>12&63)<<SHIFT[3&r++],s[r>>2]|=(128|o>>6&63)<<SHIFT[3&r++],s[r>>2]|=(128|63&o)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,n=this.lastByteIndex;e[n>>2]|=EXTRA[3&n],n>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,n,o,r,i,a,s=this.blocks;this.first?n=((n=((e=((e=s[0]-680876937)<<7|e>>>25)-271733879<<0)^(o=((o=(-271733879^(r=((r=(-1732584194^2004318071&e)+s[1]-117830708)<<12|r>>>20)+e<<0)&(-271733879^e))+s[2]-1126478375)<<17|o>>>15)+r<<0)&(r^e))+s[3]-1316259209)<<22|n>>>10)+o<<0:(e=this.h0,n=this.h1,o=this.h2,n=((n+=((e=((e+=((r=this.h3)^n&(o^r))+s[0]-680876936)<<7|e>>>25)+n<<0)^(o=((o+=(n^(r=((r+=(o^e&(n^o))+s[1]-389564586)<<12|r>>>20)+e<<0)&(e^n))+s[2]+606105819)<<17|o>>>15)+r<<0)&(r^e))+s[3]-1044525330)<<22|n>>>10)+o<<0),n=((n+=((e=((e+=(r^n&(o^r))+s[4]-176418897)<<7|e>>>25)+n<<0)^(o=((o+=(n^(r=((r+=(o^e&(n^o))+s[5]+1200080426)<<12|r>>>20)+e<<0)&(e^n))+s[6]-1473231341)<<17|o>>>15)+r<<0)&(r^e))+s[7]-45705983)<<22|n>>>10)+o<<0,n=((n+=((e=((e+=(r^n&(o^r))+s[8]+1770035416)<<7|e>>>25)+n<<0)^(o=((o+=(n^(r=((r+=(o^e&(n^o))+s[9]-1958414417)<<12|r>>>20)+e<<0)&(e^n))+s[10]-42063)<<17|o>>>15)+r<<0)&(r^e))+s[11]-1990404162)<<22|n>>>10)+o<<0,n=((n+=((e=((e+=(r^n&(o^r))+s[12]+1804603682)<<7|e>>>25)+n<<0)^(o=((o+=(n^(r=((r+=(o^e&(n^o))+s[13]-40341101)<<12|r>>>20)+e<<0)&(e^n))+s[14]-1502002290)<<17|o>>>15)+r<<0)&(r^e))+s[15]+1236535329)<<22|n>>>10)+o<<0,n=((n+=((r=((r+=(n^o&((e=((e+=(o^r&(n^o))+s[1]-165796510)<<5|e>>>27)+n<<0)^n))+s[6]-1069501632)<<9|r>>>23)+e<<0)^e&((o=((o+=(e^n&(r^e))+s[11]+643717713)<<14|o>>>18)+r<<0)^r))+s[0]-373897302)<<20|n>>>12)+o<<0,n=((n+=((r=((r+=(n^o&((e=((e+=(o^r&(n^o))+s[5]-701558691)<<5|e>>>27)+n<<0)^n))+s[10]+38016083)<<9|r>>>23)+e<<0)^e&((o=((o+=(e^n&(r^e))+s[15]-660478335)<<14|o>>>18)+r<<0)^r))+s[4]-405537848)<<20|n>>>12)+o<<0,n=((n+=((r=((r+=(n^o&((e=((e+=(o^r&(n^o))+s[9]+568446438)<<5|e>>>27)+n<<0)^n))+s[14]-1019803690)<<9|r>>>23)+e<<0)^e&((o=((o+=(e^n&(r^e))+s[3]-187363961)<<14|o>>>18)+r<<0)^r))+s[8]+1163531501)<<20|n>>>12)+o<<0,n=((n+=((r=((r+=(n^o&((e=((e+=(o^r&(n^o))+s[13]-1444681467)<<5|e>>>27)+n<<0)^n))+s[2]-51403784)<<9|r>>>23)+e<<0)^e&((o=((o+=(e^n&(r^e))+s[7]+1735328473)<<14|o>>>18)+r<<0)^r))+s[12]-1926607734)<<20|n>>>12)+o<<0,n=((n+=((a=(r=((r+=((i=n^o)^(e=((e+=(i^r)+s[5]-378558)<<4|e>>>28)+n<<0))+s[8]-2022574463)<<11|r>>>21)+e<<0)^e)^(o=((o+=(a^n)+s[11]+1839030562)<<16|o>>>16)+r<<0))+s[14]-35309556)<<23|n>>>9)+o<<0,n=((n+=((a=(r=((r+=((i=n^o)^(e=((e+=(i^r)+s[1]-1530992060)<<4|e>>>28)+n<<0))+s[4]+1272893353)<<11|r>>>21)+e<<0)^e)^(o=((o+=(a^n)+s[7]-155497632)<<16|o>>>16)+r<<0))+s[10]-1094730640)<<23|n>>>9)+o<<0,n=((n+=((a=(r=((r+=((i=n^o)^(e=((e+=(i^r)+s[13]+681279174)<<4|e>>>28)+n<<0))+s[0]-358537222)<<11|r>>>21)+e<<0)^e)^(o=((o+=(a^n)+s[3]-722521979)<<16|o>>>16)+r<<0))+s[6]+76029189)<<23|n>>>9)+o<<0,n=((n+=((a=(r=((r+=((i=n^o)^(e=((e+=(i^r)+s[9]-640364487)<<4|e>>>28)+n<<0))+s[12]-421815835)<<11|r>>>21)+e<<0)^e)^(o=((o+=(a^n)+s[15]+530742520)<<16|o>>>16)+r<<0))+s[2]-995338651)<<23|n>>>9)+o<<0,n=((n+=((r=((r+=(n^((e=((e+=(o^(n|~r))+s[0]-198630844)<<6|e>>>26)+n<<0)|~o))+s[7]+1126891415)<<10|r>>>22)+e<<0)^((o=((o+=(e^(r|~n))+s[14]-1416354905)<<15|o>>>17)+r<<0)|~e))+s[5]-57434055)<<21|n>>>11)+o<<0,n=((n+=((r=((r+=(n^((e=((e+=(o^(n|~r))+s[12]+1700485571)<<6|e>>>26)+n<<0)|~o))+s[3]-1894986606)<<10|r>>>22)+e<<0)^((o=((o+=(e^(r|~n))+s[10]-1051523)<<15|o>>>17)+r<<0)|~e))+s[1]-2054922799)<<21|n>>>11)+o<<0,n=((n+=((r=((r+=(n^((e=((e+=(o^(n|~r))+s[8]+1873313359)<<6|e>>>26)+n<<0)|~o))+s[15]-30611744)<<10|r>>>22)+e<<0)^((o=((o+=(e^(r|~n))+s[6]-1560198380)<<15|o>>>17)+r<<0)|~e))+s[13]+1309151649)<<21|n>>>11)+o<<0,n=((n+=((r=((r+=(n^((e=((e+=(o^(n|~r))+s[4]-145523070)<<6|e>>>26)+n<<0)|~o))+s[11]-1120210379)<<10|r>>>22)+e<<0)^((o=((o+=(e^(r|~n))+s[2]+718787259)<<15|o>>>17)+r<<0)|~e))+s[9]-343485551)<<21|n>>>11)+o<<0,this.first?(this.h0=e+1732584193<<0,this.h1=n-271733879<<0,this.h2=o-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+n<<0,this.h2=this.h2+o<<0,this.h3=this.h3+r<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,n=this.h1,o=this.h2,r=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(e){if("hex"===e)return this.hex();this.finalize();var n=this.h0,o=this.h1,r=this.h2,i=this.h3;return[255&n,n>>8&255,n>>16&255,n>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255,255&i,i>>8&255,i>>16&255,i>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),n=new Uint32Array(e);return n[0]=this.h0,n[1]=this.h1,n[2]=this.h2,n[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,n,o,r="",i=this.array(),a=0;a<15;)e=i[a++],n=i[a++],o=i[a++],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|n>>>4)]+BASE64_ENCODE_CHAR[63&(n<<2|o>>>6)]+BASE64_ENCODE_CHAR[63&o];return e=i[a],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__(58),__webpack_require__(30),__webpack_require__(57)(module))},"284":function(e,n,o){(function(e){var n,r,i,a,s,c,u,l=o(27),d=d||function(e,n){var o={},r=o.lib={},i=function m(){},a=r.Base={"extend":function extend(e){i.prototype=this;var n=new i;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},"create":function create(){var e=this.extend();return e.init.apply(e,arguments),e},"init":function init(){},"mixIn":function mixIn(e){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},"clone":function clone(){return this.init.prototype.extend(this)}},s=r.WordArray=a.extend({"init":function init(e,n){e=this.words=e||[],this.sigBytes=null!=n?n:4*e.length},"toString":function toString(e){return(e||u).stringify(this)},"concat":function concat(e){var n=this.words,o=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)n[r+i>>>2]|=(o[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<o.length)for(i=0;i<e;i+=4)n[r+i>>>2]=o[i>>>2];else n.push.apply(n,o);return this.sigBytes+=e,this},"clamp":function clamp(){var n=this.words,o=this.sigBytes;n[o>>>2]&=4294967295<<32-o%4*8,n.length=e.ceil(o/4)},"clone":function clone(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},"random":function random(n){for(var o=[],r=0;r<n;r+=4)o.push(4294967296*e.random()|0);return new s.init(o,n)}}),c=o.enc={},u=c.Hex={"stringify":function stringify(e){var n=e.words;e=e.sigBytes;for(var o=[],r=0;r<e;r++){var i=n[r>>>2]>>>24-r%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},"parse":function parse(e){for(var n=e.length,o=[],r=0;r<n;r+=2)o[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(o,n/2)}},l=c.Latin1={"stringify":function stringify(e){var n=e.words;e=e.sigBytes;for(var o=[],r=0;r<e;r++)o.push(String.fromCharCode(n[r>>>2]>>>24-r%4*8&255));return o.join("")},"parse":function parse(e){for(var n=e.length,o=[],r=0;r<n;r++)o[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(o,n)}},d=c.Utf8={"stringify":function stringify(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},"parse":function parse(e){return l.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=a.extend({"reset":function reset(){this._data=new s.init,this._nDataBytes=0},"_append":function _append(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},"_process":function _process(n){var o=this._data,r=o.words,i=o.sigBytes,a=this.blockSize,c=i/(4*a);if(n=(c=n?e.ceil(c):e.max((0|c)-this._minBufferSize,0))*a,i=e.min(4*n,i),n){for(var u=0;u<n;u+=a)this._doProcessBlock(r,u);u=r.splice(0,n),o.sigBytes-=i}return new s.init(u,i)},"clone":function clone(){var e=a.clone.call(this);return e._data=this._data.clone(),e},"_minBufferSize":0});r.Hasher=f.extend({"cfg":a.extend(),"init":function init(e){this.cfg=this.cfg.extend(e),this.reset()},"reset":function reset(){f.reset.call(this),this._doReset()},"update":function update(e){return this._append(e),this._process(),this},"finalize":function finalize(e){return e&&this._append(e),this._doFinalize()},"blockSize":16,"_createHelper":function _createHelper(e){return function(n,o){return new e.init(o).finalize(n)}},"_createHmacHelper":function _createHmacHelper(e){return function(n,o){return new h.HMAC.init(e,o).finalize(n)}}});var h=o.algo={};return o}(Math);r=(s=(n=d).lib).WordArray,i=s.Hasher,a=[],s=n.algo.SHA1=i.extend({"_doReset":function _doReset(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doProcessBlock":function _doProcessBlock(e,n){for(var o=this._hash.words,r=o[0],i=o[1],s=o[2],c=o[3],u=o[4],l=0;80>l;l++){if(16>l)a[l]=0|e[n+l];else{var d=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=d<<1|d>>>31}d=(r<<5|r>>>27)+u+a[l],d=20>l?d+(1518500249+(i&s|~i&c)):40>l?d+(1859775393+(i^s^c)):60>l?d+((i&s|i&c|s&c)-1894007588):d+((i^s^c)-899497514),u=c,c=s,s=i<<30|i>>>2,i=r,r=d}o[0]=o[0]+r|0,o[1]=o[1]+i|0,o[2]=o[2]+s|0,o[3]=o[3]+c|0,o[4]=o[4]+u|0},"_doFinalize":function _doFinalize(){var e=this._data,n=e.words,o=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=Math.floor(o/4294967296),n[15+(r+64>>>9<<4)]=o,e.sigBytes=4*n.length,this._process(),this._hash},"clone":function clone(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=i._createHelper(s),n.HmacSHA1=i._createHmacHelper(s),function(){var e=d,n=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({"init":function init(e,o){e=this._hasher=new e.init,"string"==typeof o&&(o=n.parse(o));var r=e.blockSize,i=4*r;o.sigBytes>i&&(o=e.finalize(o)),o.clamp();for(var a=this._oKey=o.clone(),s=this._iKey=o.clone(),c=a.words,u=s.words,l=0;l<r;l++)c[l]^=1549556828,u[l]^=909522486;a.sigBytes=s.sigBytes=i,this.reset()},"reset":function reset(){var e=this._hasher;e.reset(),e.update(this._iKey)},"update":function update(e){return this._hasher.update(e),this},"finalize":function finalize(e){var n=this._hasher;return e=n.finalize(e),n.reset(),n.finalize(this._oKey.clone().concat(e))}})}(),u=(c=d).lib.WordArray,c.enc.Base64={"stringify":function stringify(e){var n=e.words,o=e.sigBytes,r=this._map;e.clamp();for(var i=[],a=0;a<o;a+=3)for(var s=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,c=0;c<4&&a+.75*c<o;c++)i.push(r.charAt(s>>>6*(3-c)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},"parse":function parse(e){var n=e.length,o=this._map,r=o.charAt(64);if(r){var i=e.indexOf(r);-1!=i&&(n=i)}for(var a=[],s=0,c=0;c<n;c++)if(c%4){var l=o.indexOf(e.charAt(c-1))<<c%4*2,d=o.indexOf(e.charAt(c))>>>6-c%4*2;a[s>>>2]|=(l|d)<<24-s%4*8,s++}return u.create(a,s)},"_map":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},"object"===l(e)?e.exports=d:window.CryptoJS=d}).call(this,o(57)(e))},"285":function(e,n,o){var r=o(286).DOMParser,i=function(){this.version="1.3.5";var e={"mergeCDATA":!0,"normalize":!0,"stripElemPrefix":!0},n=new RegExp(/(?!xmlns)^.*:/);new RegExp(/^\s+|\s+$/g);return this.grokType=function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):e},this.parseString=function(e,n){if(e){var o=this.stringToXML(e);return o.getElementsByTagName("parsererror").length?null:this.parseXML(o,n)}return null},this.parseXML=function(o,r){for(var a in r)e[a]=r[a];var s={},c=0,u="";if(o.childNodes.length)for(var l,d,f,h=0;h<o.childNodes.length;h++)4===(l=o.childNodes.item(h)).nodeType?e.mergeCDATA&&(u+=l.nodeValue):3===l.nodeType?u+=l.nodeValue:1===l.nodeType&&(0===c&&(s={}),d=e.stripElemPrefix?l.nodeName.replace(n,""):l.nodeName,f=i.parseXML(l),s.hasOwnProperty(d)?(s[d].constructor!==Array&&(s[d]=[s[d]]),s[d].push(f)):(s[d]=f,c++));return Object.keys(s).length||(s=u||""),s},this.xmlToString=function(e){try{return e.xml?e.xml:(new XMLSerializer).serializeToString(e)}catch(e){return null}},this.stringToXML=function(e){try{var n=null;return window.DOMParser?n=(new r).parseFromString(e,"text/xml"):((n=new ActiveXObject("Microsoft.XMLDOM")).async=!1,n.loadXML(e),n)}catch(e){return null}},this}.call({});e.exports=function xml2json(e){return i.parseString(e)}},"286":function(e,n,o){function DOMParser(e){this.options=e||{"locator":{}}}function DOMHandler(){this.cdata=!1}function position(e,n){n.lineNumber=e.lineNumber,n.columnNumber=e.columnNumber}function _locator(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function _toString(e,n,o){return"string"==typeof e?e.substr(n,o):e.length>=n+o||n?new java.lang.String(e,n,o)+"":e}function appendElement(e,n){e.currentElement?e.currentElement.appendChild(n):e.doc.appendChild(n)}DOMParser.prototype.parseFromString=function(e,n){var o=this.options,i=new r,a=o.domBuilder||new DOMHandler,s=o.errorHandler,c=o.locator,u=o.xmlns||{},l={"lt":"<","gt":">","amp":"&","quot":'"',"apos":"'"};return c&&a.setDocumentLocator(c),i.errorHandler=function buildErrorHandler(e,n,o){if(!e){if(n instanceof DOMHandler)return n;e=n}var r={},i=e instanceof Function;function build(n){var a=e[n];!a&&i&&(a=2==e.length?function(o){e(n,o)}:e),r[n]=a&&function(e){a("[xmldom "+n+"]\t"+e+_locator(o))}||function(){}}return o=o||{},build("warning"),build("error"),build("fatalError"),r}(s,a,c),i.domBuilder=o.domBuilder||a,/\/x?html?$/.test(n)&&(l.nbsp=" ",l.copy="©",u[""]="http://www.w3.org/1999/xhtml"),u.xml=u.xml||"http://www.w3.org/XML/1998/namespace",e?i.parse(e,u,l):i.errorHandler.error("invalid doc source"),a.doc},DOMHandler.prototype={"startDocument":function startDocument(){this.doc=(new i).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},"startElement":function startElement(e,n,o,r){var i=this.doc,a=i.createElementNS(e,o||n),s=r.length;appendElement(this,a),this.currentElement=a,this.locator&&position(this.locator,a);for(var c=0;c<s;c++){e=r.getURI(c);var u=r.getValue(c),l=(o=r.getQName(c),i.createAttributeNS(e,o));this.locator&&position(r.getLocator(c),l),l.value=l.nodeValue=u,a.setAttributeNode(l)}},"endElement":function endElement(e,n,o){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},"startPrefixMapping":function startPrefixMapping(e,n){},"endPrefixMapping":function endPrefixMapping(e){},"processingInstruction":function processingInstruction(e,n){var o=this.doc.createProcessingInstruction(e,n);this.locator&&position(this.locator,o),appendElement(this,o)},"ignorableWhitespace":function ignorableWhitespace(e,n,o){},"characters":function characters(e,n,o){if(e=_toString.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&position(this.locator,r)}},"skippedEntity":function skippedEntity(e){},"endDocument":function endDocument(){this.doc.normalize()},"setDocumentLocator":function setDocumentLocator(e){(this.locator=e)&&(e.lineNumber=0)},"comment":function comment(e,n,o){e=_toString.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&position(this.locator,r),appendElement(this,r)},"startCDATA":function startCDATA(){this.cdata=!0},"endCDATA":function endCDATA(){this.cdata=!1},"startDTD":function startDTD(e,n,o){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,n,o);this.locator&&position(this.locator,i),appendElement(this,i)}},"warning":function warning(e){console.warn("[xmldom warning]\t"+e,_locator(this.locator))},"error":function error(e){console.error("[xmldom error]\t"+e,_locator(this.locator))},"fatalError":function fatalError(e){throw console.error("[xmldom fatalError]\t"+e,_locator(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){DOMHandler.prototype[e]=function(){return null}}));var r=o(287).XMLReader,i=n.DOMImplementation=o(237).DOMImplementation;n.XMLSerializer=o(237).XMLSerializer,n.DOMParser=DOMParser},"287":function(e,n){var o=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+o.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+o.source+r.source+"*(?::"+o.source+r.source+"*)?$");function XMLReader(){}function copyLocator(e,n){return n.lineNumber=e.lineNumber,n.columnNumber=e.columnNumber,n}function parseElementStartPart(e,n,o,r,i,a){for(var s,c=++n,u=0;;){var l=e.charAt(c);switch(l){case"=":if(1===u)s=e.slice(n,c),u=3;else{if(2!==u)throw new Error("attribute equal must after attrName");u=3}break;case"'":case'"':if(3===u||1===u){if(1===u&&(a.warning('attribute value must after "="'),s=e.slice(n,c)),n=c+1,!((c=e.indexOf(l,n))>0))throw new Error("attribute value no end '"+l+"' match");d=e.slice(n,c).replace(/&#?\w+;/g,i),o.add(s,d,n-1),u=5}else{if(4!=u)throw new Error('attribute value must after "="');d=e.slice(n,c).replace(/&#?\w+;/g,i),o.add(s,d,n),a.warning('attribute "'+s+'" missed start quot('+l+")!!"),n=c+1,u=5}break;case"/":switch(u){case 0:o.setTagName(e.slice(n,c));case 5:case 6:case 7:u=7,o.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==u&&o.setTagName(e.slice(n,c)),c;case">":switch(u){case 0:o.setTagName(e.slice(n,c));case 5:case 6:case 7:break;case 4:case 1:"/"===(d=e.slice(n,c)).slice(-1)&&(o.closed=!0,d=d.slice(0,-1));case 2:2===u&&(d=s),4==u?(a.warning('attribute "'+d+'" missed quot(")!!'),o.add(s,d.replace(/&#?\w+;/g,i),n)):("http://www.w3.org/1999/xhtml"===r[""]&&d.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),o.add(d,d,n));break;case 3:throw new Error("attribute value missed!!")}return c;case"":l=" ";default:if(l<=" ")switch(u){case 0:o.setTagName(e.slice(n,c)),u=6;break;case 1:s=e.slice(n,c),u=2;break;case 4:var d=e.slice(n,c).replace(/&#?\w+;/g,i);a.warning('attribute "'+d+'" missed quot(")!!'),o.add(s,d,n);case 5:u=6}else switch(u){case 2:o.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&s.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),o.add(s,s,n),n=c,u=1;break;case 5:a.warning('attribute space is required"'+s+'"!!');case 6:u=1,n=c;break;case 3:u=4,n=c;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function appendElement(e,n,o){for(var r=e.tagName,i=null,a=e.length;a--;){var s=e[a],c=s.qName,u=s.value;if((h=c.indexOf(":"))>0)var l=s.prefix=c.slice(0,h),d=c.slice(h+1),f="xmlns"===l&&d;else d=c,l=null,f="xmlns"===c&&"";s.localName=d,!1!==f&&(null==i&&(i={},_copy(o,o={})),o[f]=i[f]=u,s.uri="http://www.w3.org/2000/xmlns/",n.startPrefixMapping(f,u))}for(a=e.length;a--;){(l=(s=e[a]).prefix)&&("xml"===l&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(s.uri=o[l||""]))}var h;(h=r.indexOf(":"))>0?(l=e.prefix=r.slice(0,h),d=e.localName=r.slice(h+1)):(l=null,d=e.localName=r);var g=e.uri=o[l||""];if(n.startElement(g,d,r,e),!e.closed)return e.currentNSMap=o,e.localNSMap=i,!0;if(n.endElement(g,d,r),i)for(l in i)n.endPrefixMapping(l)}function parseHtmlSpecialContent(e,n,o,r,i){if(/^(?:script|textarea)$/i.test(o)){var a=e.indexOf("</"+o+">",n),s=e.substring(n+1,a);if(/[&<]/.test(s))return/^script$/i.test(o)?(i.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,r),i.characters(s,0,s.length),a)}return n+1}function fixSelfClosed(e,n,o,r){var i=r[o];return null==i&&((i=e.lastIndexOf("</"+o+">"))<n&&(i=e.lastIndexOf("</"+o)),r[o]=i),i<n}function _copy(e,n){for(var o in e)n[o]=e[o]}function parseDCC(e,n,o,r){switch(e.charAt(n+2)){case"-":return"-"===e.charAt(n+3)?(i=e.indexOf("--\x3e",n+4))>n?(o.comment(e,n+4,i-n-4),i+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(n+3,6)){var i=e.indexOf("]]>",n+9);return o.startCDATA(),o.characters(e,n+9,i-n-9),o.endCDATA(),i+3}var a=function split(e,n){var o,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;i.lastIndex=n,i.exec(e);for(;o=i.exec(e);)if(r.push(o),o[1])return r}(e,n),s=a.length;if(s>1&&/!doctype/i.test(a[0][0])){var c=a[1][0],u=s>3&&/^public$/i.test(a[2][0])&&a[3][0],l=s>4&&a[4][0],d=a[s-1];return o.startDTD(c,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),o.endDTD(),d.index+d[0].length}}return-1}function parseInstruction(e,n,o){var r=e.indexOf("?>",n);if(r){var i=e.substring(n,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return o.processingInstruction(i[1],i[2]),r+2}return-1}return-1}function ElementAttributes(e){}function _set_proto_(e,n){return e.__proto__=n,e}XMLReader.prototype={"parse":function parse(e,n,o){var r=this.domBuilder;r.startDocument(),_copy(n,n={}),function _parse(e,n,o,r,i){function entityReplacer(e){var n=e.slice(1,-1);return n in o?o[n]:"#"===n.charAt(0)?function fixedFromCharCode(e){if(e>65535){var n=55296+((e-=65536)>>10),o=56320+(1023&e);return String.fromCharCode(n,o)}return String.fromCharCode(e)}(parseInt(n.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function appendText(n){if(n>f){var o=e.substring(f,n).replace(/&#?\w+;/g,entityReplacer);u&&position(f),r.characters(o,0,n-f),f=n}}function position(n,o){for(;n>=s&&(o=c.exec(e));)a=o.index,s=a+o[0].length,u.lineNumber++;u.columnNumber=n-a+1}var a=0,s=0,c=/.*(?:\r\n?|\n)|.*$/g,u=r.locator,l=[{"currentNSMap":n}],d={},f=0;for(;;){try{var h=e.indexOf("<",f);if(h<0){if(!e.substr(f).match(/^\s*$/)){var g=r.doc,y=g.createTextNode(e.substr(f));g.appendChild(y),r.currentElement=y}return}switch(h>f&&appendText(h),e.charAt(h+1)){case"/":var C=e.indexOf(">",h+3),v=e.substring(h+2,C),k=l.pop();C<0?(v=e.substring(h+2).replace(/[\s<].*/,""),i.error("end tag name: "+v+" is not complete:"+k.tagName),C=h+1+v.length):v.match(/\s</)&&(v=v.replace(/[\s<].*/,""),i.error("end tag name: "+v+" maybe not complete"),C=h+1+v.length);var R=k.localNSMap,S=k.tagName==v;if(S||k.tagName&&k.tagName.toLowerCase()==v.toLowerCase()){if(r.endElement(k.uri,k.localName,v),R)for(var b in R)r.endPrefixMapping(b);S||i.fatalError("end tag name: "+v+" is not match the current start tagName:"+k.tagName)}else l.push(k);C++;break;case"?":u&&position(h),C=parseInstruction(e,h,r);break;case"!":u&&position(h),C=parseDCC(e,h,r,i);break;default:u&&position(h);var A=new ElementAttributes,B=l[l.length-1].currentNSMap,T=(C=parseElementStartPart(e,h,A,B,entityReplacer,i),A.length);if(!A.closed&&fixSelfClosed(e,C,A.tagName,d)&&(A.closed=!0,o.nbsp||i.warning("unclosed xml attribute")),u&&T){for(var _=copyLocator(u,{}),x=0;x<T;x++){var E=A[x];position(E.offset),E.locator=copyLocator(u,{})}r.locator=_,appendElement(A,r,B)&&l.push(A),r.locator=u}else appendElement(A,r,B)&&l.push(A);"http://www.w3.org/1999/xhtml"!==A.uri||A.closed?C++:C=parseHtmlSpecialContent(e,C,A.tagName,entityReplacer,r)}}catch(e){i.error("element parse error: "+e),C=-1}C>f?f=C:appendText(Math.max(h,f)+1)}}(e,n,o,r,this.errorHandler),r.endDocument()}},ElementAttributes.prototype={"setTagName":function setTagName(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},"add":function add(e,n,o){if(!i.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={"qName":e,"value":n,"offset":o}},"length":0,"getLocalName":function getLocalName(e){return this[e].localName},"getLocator":function getLocator(e){return this[e].locator},"getQName":function getQName(e){return this[e].qName},"getURI":function getURI(e){return this[e].uri},"getValue":function getValue(e){return this[e].value}},_set_proto_({},_set_proto_.prototype)instanceof _set_proto_||(_set_proto_=function _set_proto_(e,n){function p(){}for(n in p.prototype=n,p=new p,e)p[n]=e[n];return p}),n.XMLReader=XMLReader},"288":function(e,n,o){var r=o(27),i=new RegExp("^([^a-zA-Z_À-ÖØ-öø-ÿͰ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿿、-퟿豈-﷏ﷰ-�])|^((x|X)(m|M)(l|L))|([^a-zA-Z_À-ÖØ-öø-ÿͰ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿿、-퟿豈-﷏ﷰ-�-.0-9·̀-ͯ‿⁀])","g"),a=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,s=function objKeys(e){var n=[];if(e instanceof Object)for(var o in e)e.hasOwnProperty(o)&&n.push(o);return n},c=function process_to_xml(e,n){var o=function makeNode(e,o,r,a,s){var c=void 0!==n.indent?n.indent:"\t",u=n.prettyPrint?"\n"+new Array(a).join(c):"";n.removeIllegalNameCharacters&&(e=e.replace(i,"_"));var l=[u,"<",e,r||""];return o&&o.length>0?(l.push(">"),l.push(o),s&&l.push(u),l.push("</"),l.push(e),l.push(">")):l.push("/>"),l.join("")};return function fn(e,i,c){var u=r(e);switch((Array.isArray?Array.isArray(e):e instanceof Array)?u="array":e instanceof Date&&(u="date"),u){case"array":var l=[];return e.map((function(e){l.push(fn(e,1,c+1))})),n.prettyPrint&&l.push("\n"),l.join("");case"date":return e.toJSON?e.toJSON():e+"";case"object":var d=[];for(var f in e)if(e.hasOwnProperty(f))if(e[f]instanceof Array)for(var h=0;h<e[f].length;h++)e[f].hasOwnProperty(h)&&d.push(o(f,fn(e[f][h],0,c+1),null,c+1,s(e[f][h]).length));else d.push(o(f,fn(e[f],0,c+1),null,c+1));return n.prettyPrint&&d.length>0&&d.push("\n"),d.join("");case"function":return e();default:return n.escape?function esc(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(a,"")}(e):""+e}}(e,0,0)},u=function xml_header(e){var n=['<?xml version="1.0" encoding="UTF-8"'];return e&&n.push(' standalone="yes"'),n.push("?>"),n.join("")};e.exports=function(e,n){if(n||(n={"xmlHeader":{"standalone":!0},"prettyPrint":!0,"indent":"  ","escape":!0}),"string"==typeof e)try{e=JSON.parse(e.toString())}catch(e){return!1}var o="",i="";return n&&("object"==r(n)?(n.xmlHeader&&(o=u(!!n.xmlHeader.standalone)),void 0!==n.docType&&(i="<!DOCTYPE "+n.docType+">")):o=u()),[o,(n=n||{}).prettyPrint&&i?"\n":"",i,c(e,n)].join("").replace(/\n{2,}/g,"\n").replace(/\s+$/g,"")}},"289":function(e,n,o){var r=o(239),i=o(220),a={};e.exports.transferToTaskMethod=function transferToTaskMethod(e,n){a[n]=e[n],e[n]=function(e,o){e.SkipTask?a[n].call(this,e,o):this._addTask(n,e,o)}},e.exports.init=function initTask(e){var n,o,s=[],c={},u=0,l=0,d=function formatTask(e){var n={"id":e.id,"Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"FilePath":e.FilePath,"state":e.state,"loaded":e.loaded,"size":e.size,"speed":e.speed,"percent":e.percent,"hashPercent":e.hashPercent,"error":e.error};return e.FilePath&&(n.FilePath=e.FilePath),e._custom&&(n._custom=e._custom),n},f=(o=function emit(){n=0,e.emit("task-list-update",{"list":i.map(s,d)}),e.emit("list-update",{"list":i.map(s,d)})},function(){n||(n=setTimeout(o))}),h=function clearQueue(){if(!(s.length<=e.options.UploadQueueSize)){for(var n=0;n<l&&n<s.length&&s.length>e.options.UploadQueueSize;){var o="waiting"===s[n].state||"checking"===s[n].state||"uploading"===s[n].state;s[n]&&o?n++:(c[s[n].id]&&delete c[s[n].id],s.splice(n,1),l--)}f()}},g=function startNextTask(){if(!(u>=e.options.FileParallelLimit)){for(;s[l]&&"waiting"!==s[l].state;)l++;if(!(l>=s.length)){var n=s[l];l++,u++,n.state="checking",n.params.onTaskStart&&n.params.onTaskStart(d(n)),!n.params.UploadData&&(n.params.UploadData={});var o=i.formatParams(n.api,n.params);a[n.api].call(e,o,(function(o,r){e._isRunningTask(n.id)&&("checking"!==n.state&&"uploading"!==n.state||(n.state=o?"error":"success",o&&(n.error=o),u--,f(),startNextTask(),n.callback&&n.callback(o,r),"success"===n.state&&(n.params&&(delete n.params.UploadData,delete n.params.Body,delete n.params),delete n.callback)),h())})),f(),setTimeout(startNextTask)}}},y=function killTask(n,o){var i=c[n];if(i){var a=i&&"waiting"===i.state,s=i&&("checking"===i.state||"uploading"===i.state);if("canceled"===o&&"canceled"!==i.state||"paused"===o&&a||"paused"===o&&s){if("paused"===o&&i.params.Body&&"function"==typeof i.params.Body.pipe)return void console.error("stream not support pause");i.state=o,e.emit("inner-kill-task",{"TaskId":n,"toState":o});try{var l=i&&i.params&&i.params.UploadData.UploadId}catch(e){}"canceled"===o&&l&&r.removeUsing(l),f(),s&&(u--,g()),"canceled"===o&&(i.params&&(delete i.params.UploadData,delete i.params.Body,delete i.params),delete i.callback)}h()}};e._addTasks=function(n){i.each(n,(function(n){e._addTask(n.api,n.params,n.callback,!0)})),f()};var C=!0;e._addTask=function(n,o,r,a){o=i.formatParams(n,o);var u=i.uuid();o.TaskId=u,o.onTaskReady&&o.onTaskReady(u),o.TaskReady&&(o.TaskReady(u),C&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),C=!1);var l={"params":o,"callback":r,"api":n,"index":s.length,"id":u,"Bucket":o.Bucket,"Region":o.Region,"Key":o.Key,"FilePath":o.FilePath||"","state":"waiting","loaded":0,"size":0,"speed":0,"percent":0,"hashPercent":0,"error":null,"_custom":o._custom},d=o.onHashProgress;o.onHashProgress=function(n){e._isRunningTask(l.id)&&(l.hashPercent=n.percent,d&&d(n),f())};var y=o.onProgress;return o.onProgress=function(n){e._isRunningTask(l.id)&&("checking"===l.state&&(l.state="uploading"),l.loaded=n.loaded,l.speed=n.speed,l.percent=n.percent,y&&y(n),f())},i.getFileSize(n,o,(function(e,n){if(e)return r(i.error(e));c[u]=l,s.push(l),l.size=n,!a&&f(),g(),h()})),u},e._isRunningTask=function(e){var n=c[e];return!(!n||"checking"!==n.state&&"uploading"!==n.state)},e.getTaskList=function(){return i.map(s,d)},e.cancelTask=function(e){y(e,"canceled")},e.pauseTask=function(e){y(e,"paused")},e.restartTask=function(e){var n=c[e];!n||"paused"!==n.state&&"error"!==n.state||(n.state="waiting",f(),l=Math.min(l,n.index),g())},e.isUploadRunning=function(){return u||l<s.length}}},"290":function(e,n,o){var r=o(291),i=o(220);function decodeAcl(e){var n={"GrantFullControl":[],"GrantWrite":[],"GrantRead":[],"GrantReadAcp":[],"GrantWriteAcp":[],"ACL":""},o={"FULL_CONTROL":"GrantFullControl","WRITE":"GrantWrite","READ":"GrantRead","READ_ACP":"GrantReadAcp","WRITE_ACP":"GrantWriteAcp"},r=(e&&e.AccessControlList||{}).Grant;r&&(r=i.isArray(r)?r:[r]);var a={"READ":0,"WRITE":0,"FULL_CONTROL":0};return r&&r.length&&i.each(r,(function(r){"qcs::cam::anyone:anyone"===r.Grantee.ID||"http://cam.qcloud.com/groups/global/AllUsers"===r.Grantee.URI?a[r.Permission]=1:r.Grantee.ID!==e.Owner.ID&&n[o[r.Permission]].push('id="'+r.Grantee.ID+'"')})),a.FULL_CONTROL||a.WRITE&&a.READ?n.ACL="public-read-write":a.READ?n.ACL="public-read":n.ACL="private",i.each(o,(function(e){n[e]=uniqGrant(n[e].join(","))})),n}function uniqGrant(e){var n,o,r=e.split(","),i={};for(n=0;n<r.length;)i[o=r[n].trim()]?r.splice(n,1):(i[o]=!0,r[n]=o,n++);return r.join(",")}function getUrl(e){var n=e.bucket,o=n.substr(0,n.lastIndexOf("-")),r=n.substr(n.lastIndexOf("-")+1),a=e.domain,s=e.region,c=e.object,u=e.protocol||(i.isBrowser&&"http:"===location.protocol?"http:":"https:");a||(a=["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(s)>-1?"{Region}.myqcloud.com":"cos.{Region}.myqcloud.com",e.ForcePathStyle||(a="{Bucket}."+a)),a=(a=a.replace(/\{\{AppId\}\}/gi,r).replace(/\{\{Bucket\}\}/gi,o).replace(/\{\{Region\}\}/gi,s).replace(/\{\{.*?\}\}/gi,"")).replace(/\{AppId\}/gi,r).replace(/\{BucketName\}/gi,o).replace(/\{Bucket\}/gi,n).replace(/\{Region\}/gi,s).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(a)||(a=u+"//"+a),"/"===a.slice(-1)&&(a=a.slice(0,-1));var l=a;return e.ForcePathStyle&&(l+="/"+n),l+="/",c&&(l+=i.camSafeUrlEncode(c).replace(/%2F/g,"/")),e.isLocation&&(l=l.replace(/^https?:\/\//,"")),l}function getAuthorizationAsync(e,n){var o=i.clone(e.Headers);i.each(o,(function(e,n){(""===e||["content-type","cache-control","expires"].indexOf(n.toLowerCase())>-1)&&delete o[n]}));var r=!1,a=function cb(e,o){r||(r=!0,o&&o.XCosSecurityToken&&!o.SecurityToken&&((o=i.clone(o)).SecurityToken=o.XCosSecurityToken,delete o.XCosSecurityToken),n&&n(e,o))},s=this,c=e.Bucket||"",u=e.Region||"",l=e.Key||"";s.options.ForcePathStyle&&c&&(l=c+"/"+l);var d="/"+l,f={},h=e.Scope;if(!h){var g=e.Action||"",y=e.ResourceKey||e.Key||"";h=e.Scope||[{"action":g,"bucket":c,"region":u,"prefix":y}]}var C=i.md5(JSON.stringify(h));s._StsCache=s._StsCache||[],function(){var e,n;for(e=s._StsCache.length-1;e>=0;e--){n=s._StsCache[e];var o=Math.round(i.getSkewTime(s.options.SystemClockOffset)/1e3)+30;if(n.StartTime&&o<n.StartTime||o>=n.ExpiredTime)s._StsCache.splice(e,1);else if(!n.ScopeLimit||n.ScopeLimit&&n.ScopeKey===C){f=n;break}}}();var v,k=function calcAuthByTmpKey(){var n=f.StartTime&&f.ExpiredTime?f.StartTime+";"+f.ExpiredTime:"",r={"Authorization":i.getAuth({"SecretId":f.TmpSecretId,"SecretKey":f.TmpSecretKey,"Method":e.Method,"Pathname":d,"Query":e.Query,"Headers":o,"Expires":e.Expires,"UseRawKey":s.options.UseRawKey,"SystemClockOffset":s.options.SystemClockOffset,"KeyTime":n}),"SecurityToken":f.SecurityToken||f.XCosSecurityToken||"","Token":f.Token||"","ClientIP":f.ClientIP||"","ClientUA":f.ClientUA||""};a(null,r)},R=function checkAuthError(e){if(e.Authorization){var n=!1,o=e.Authorization;if(o)if(o.indexOf(" ")>-1)n=!1;else if(o.indexOf("q-sign-algorithm=")>-1&&o.indexOf("q-ak=")>-1&&o.indexOf("q-sign-time=")>-1&&o.indexOf("q-key-time=")>-1&&o.indexOf("q-url-param-list=")>-1)n=!0;else try{(o=atob(o)).indexOf("a=")>-1&&o.indexOf("k=")>-1&&o.indexOf("t=")>-1&&o.indexOf("r=")>-1&&o.indexOf("b=")>-1&&(n=!0)}catch(e){}if(!n)return i.error(new Error("getAuthorization callback params format error"))}else{if(!e.TmpSecretId)return i.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!e.TmpSecretKey)return i.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!e.SecurityToken&&!e.XCosSecurityToken)return i.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!e.ExpiredTime)return i.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(e.ExpiredTime&&10!==e.ExpiredTime.toString().length)return i.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(e.StartTime&&10!==e.StartTime.toString().length)return i.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(f.ExpiredTime&&f.ExpiredTime-i.getSkewTime(s.options.SystemClockOffset)/1e3>60)k();else if(s.options.getAuthorization)s.options.getAuthorization.call(s,{"Bucket":c,"Region":u,"Method":e.Method,"Key":l,"Pathname":d,"Query":e.Query,"Headers":o,"Scope":h,"SystemClockOffset":s.options.SystemClockOffset},(function(e){"string"==typeof e&&(e={"Authorization":e});var n=R(e);if(n)return a(n);e.Authorization?a(null,e):((f=e||{}).Scope=h,f.ScopeKey=C,s._StsCache.push(f),k())}));else{if(!s.options.getSTS)return v={"Authorization":i.getAuth({"SecretId":e.SecretId||s.options.SecretId,"SecretKey":e.SecretKey||s.options.SecretKey,"Method":e.Method,"Pathname":d,"Query":e.Query,"Headers":o,"Expires":e.Expires,"UseRawKey":s.options.UseRawKey,"SystemClockOffset":s.options.SystemClockOffset}),"SecurityToken":s.options.SecurityToken||s.options.XCosSecurityToken},a(null,v),v;s.options.getSTS.call(s,{"Bucket":c,"Region":u},(function(e){(f=e||{}).Scope=h,f.ScopeKey=C,f.TmpSecretId||(f.TmpSecretId=f.SecretId),f.TmpSecretKey||(f.TmpSecretKey=f.SecretKey);var n=R(f);if(n)return a(n);s._StsCache.push(f),k()}))}return""}function allowRetry(e){var n=!1,o=!1,r=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var a=e.error.Code,s=e.error.Message;("RequestTimeTooSkewed"===a||"AccessDenied"===a&&"Request has expired"===s)&&(o=!0)}catch(e){}if(e)if(o&&r){var c=Date.parse(r);this.options.CorrectClockSkew&&Math.abs(i.getSkewTime(this.options.SystemClockOffset)-c)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=c-Date.now(),n=!0)}else 5===Math.floor(e.statusCode/100)&&(n=!0);return n}function submitRequest(e,n){var o=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=i.clearKey(e.qs),e.headers&&(e.headers=i.clearKey(e.headers)),e.qs&&(e.qs=i.clearKey(e.qs));var r=i.clone(e.qs);e.action&&(r[e.action]="");!function next(i){var a=o.options.SystemClockOffset;getAuthorizationAsync.call(o,{"Bucket":e.Bucket||"","Region":e.Region||"","Method":e.method,"Key":e.Key,"Query":r,"Headers":e.headers,"Action":e.Action,"ResourceKey":e.ResourceKey,"Scope":e.Scope},(function(r,s){r?n(r):(e.AuthData=s,_submitRequest.call(o,e,(function(r,s){r&&i<2&&(a!==o.options.SystemClockOffset||allowRetry.call(o,r))?(e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,delete e.headers["x-cos-security-token"]),next(i+1)):n(r,s)})))}))}(1)}function _submitRequest(e,n){var o=this,a=e.TaskId;if(!a||o._isRunningTask(a)){var s=e.Bucket,c=e.Region,u=e.Key,l=e.method||"GET",d=e.url,f=e.body,h=e.rawBody;o.options.UseAccelerate&&(c="accelerate"),d=d||getUrl({"ForcePathStyle":o.options.ForcePathStyle,"protocol":o.options.Protocol,"domain":o.options.Domain,"bucket":s,"region":c,"object":u}),e.action&&(d=d+"?"+e.action),e.qsStr&&(d=d.indexOf("?")>-1?d+"&"+e.qsStr:d+"?"+e.qsStr);var g={"method":l,"url":d,"headers":e.headers,"qs":e.qs,"body":f};if(g.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(g.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(g.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(g.headers.clientUA=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(g.headers["x-cos-security-token"]=e.AuthData.SecurityToken),g.headers&&(g.headers=i.clearKey(g.headers)),g=i.clearKey(g),e.onProgress&&"function"==typeof e.onProgress){var y=f&&(f.size||f.length)||0;g.onProgress=function(n){if(!a||o._isRunningTask(a)){var r=n?n.loaded:0;e.onProgress({"loaded":r,"total":y})}}}e.onDownloadProgress&&(g.onDownloadProgress=e.onDownloadProgress),e.DataType&&(g.dataType=e.DataType),this.options.Timeout&&(g.timeout=this.options.Timeout),o.options.ForcePathStyle&&(g.pathStyle=o.options.ForcePathStyle),o.emit("before-send",g);var C=(o.options.Request||r)(g,(function(e){if("abort"!==e.error){o.emit("after-receive",e);var r,s={"statusCode":e.statusCode,"statusMessage":e.statusMessage,"headers":e.headers},c=e.error,u=e.body,l=function cb(e,c){if(a&&o.off("inner-kill-task",v),!r){r=!0;var u={};s&&s.statusCode&&(u.statusCode=s.statusCode),s&&s.headers&&(u.headers=s.headers),e?(e=i.extend(e||{},u),n(e,null)):(c=i.extend(c||{},u),n(null,c)),C=null}};if(c)return l(i.error(c));var d,f=s.statusCode,g=2===Math.floor(f/100);if(h&&g)return l(null,{"body":u});try{d=u&&u.indexOf("<")>-1&&u.indexOf(">")>-1&&i.xml2json(u)||{}}catch(e){d={}}var y=d&&d.Error;g?l(null,d):y?l(i.error(new Error(y.Message),{"code":y.Code,"error":y})):f?l(i.error(new Error(s.statusMessage),{"code":""+f})):f&&l(i.error(new Error("statusCode error")))}})),v=function killTask(e){e.TaskId===a&&(C&&C.abort&&C.abort(),o.off("inner-kill-task",killTask))};a&&o.on("inner-kill-task",v)}}var a={"getService":function getService(e,n){"function"==typeof e&&(n=e,e={});var o=this.options.Protocol||(i.isBrowser&&"http:"===location.protocol?"http:":"https:"),r=this.options.ServiceDomain,a=e.AppId||this.options.appId,s=e.Region;r?(r=r.replace(/\{\{AppId\}\}/gi,a||"").replace(/\{\{Region\}\}/gi,s||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(r)||(r=o+"//"+r),"/"===r.slice(-1)&&(r=r.slice(0,-1))):r=s?o+"//cos."+s+".myqcloud.com":o+"//service.cos.myqcloud.com",submitRequest.call(this,{"Action":"name/cos:GetService","url":r,"method":"GET","headers":e.Headers},(function(e,o){if(e)return n(e);var r=o&&o.ListAllMyBucketsResult&&o.ListAllMyBucketsResult.Buckets&&o.ListAllMyBucketsResult.Buckets.Bucket||[];r=i.isArray(r)?r:[r];var a=o&&o.ListAllMyBucketsResult&&o.ListAllMyBucketsResult.Owner||{};n(null,{"Buckets":r,"Owner":a,"statusCode":o.statusCode,"headers":o.headers})}))},"putBucket":function putBucket(e,n){var o=this,r="";if(e.BucketAZConfig){var a={"BucketAZConfig":e.BucketAZConfig};r=i.json2xml({"CreateBucketConfiguration":a})}submitRequest.call(this,{"Action":"name/cos:PutBucket","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"body":r},(function(r,i){if(r)return n(r);var a=getUrl({"protocol":o.options.Protocol,"domain":o.options.Domain,"bucket":e.Bucket,"region":e.Region,"isLocation":!0});n(null,{"Location":a,"statusCode":i.statusCode,"headers":i.headers})}))},"headBucket":function headBucket(e,n){submitRequest.call(this,{"Action":"name/cos:HeadBucket","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"method":"HEAD"},n)},"getBucket":function getBucket(e,n){var o={};o.prefix=e.Prefix||"",o.delimiter=e.Delimiter,o.marker=e.Marker,o["max-keys"]=e.MaxKeys,o["encoding-type"]=e.EncodingType,submitRequest.call(this,{"Action":"name/cos:GetBucket","ResourceKey":o.prefix,"method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"qs":o},(function(e,o){if(e)return n(e);var r=o.ListBucketResult||{},a=r.Contents||[],s=r.CommonPrefixes||[];a=i.isArray(a)?a:[a],s=i.isArray(s)?s:[s];var c=i.clone(r);i.extend(c,{"Contents":a,"CommonPrefixes":s,"statusCode":o.statusCode,"headers":o.headers}),n(null,c)}))},"deleteBucket":function deleteBucket(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteBucket","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"method":"DELETE"},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"putBucketAcl":function putBucketAcl(e,n){var o=e.Headers,r="";if(e.AccessControlPolicy){var a=i.clone(e.AccessControlPolicy||{}),s=a.Grants||a.Grant;s=i.isArray(s)?s:[s],delete a.Grant,delete a.Grants,a.AccessControlList={"Grant":s},r=i.json2xml({"AccessControlPolicy":a}),o["Content-Type"]="application/xml",o["Content-MD5"]=i.binaryBase64(i.md5(r))}i.each(o,(function(e,n){0===n.indexOf("x-cos-grant-")&&(o[n]=uniqGrant(o[n]))})),submitRequest.call(this,{"Action":"name/cos:PutBucketACL","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"headers":o,"action":"acl","body":r},(function(e,o){if(e)return n(e);n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getBucketAcl":function getBucketAcl(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketACL","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"acl"},(function(e,o){if(e)return n(e);var r=o.AccessControlPolicy||{},a=r.Owner||{},s=r.AccessControlList.Grant||[];s=i.isArray(s)?s:[s];var c=decodeAcl(r);o.headers&&o.headers["x-cos-acl"]&&(c.ACL=o.headers["x-cos-acl"]),c=i.extend(c,{"Owner":a,"Grants":s,"statusCode":o.statusCode,"headers":o.headers}),n(null,c)}))},"putBucketCors":function putBucketCors(e,n){var o=(e.CORSConfiguration||{}).CORSRules||e.CORSRules||[];o=i.clone(i.isArray(o)?o:[o]),i.each(o,(function(e){i.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],(function(n){var o=n+"s",r=e[o]||e[n]||[];delete e[o],e[n]=i.isArray(r)?r:[r]}))}));var r=i.json2xml({"CORSConfiguration":{"CORSRule":o}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.binaryBase64(i.md5(r)),submitRequest.call(this,{"Action":"name/cos:PutBucketCORS","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":r,"action":"cors","headers":a},(function(e,o){if(e)return n(e);n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getBucketCors":function getBucketCors(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketCORS","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"cors"},(function(e,o){if(e)if(404===e.statusCode&&e.error&&"NoSuchCORSConfiguration"===e.error.Code){var r={"CORSRules":[],"statusCode":e.statusCode};e.headers&&(r.headers=e.headers),n(null,r)}else n(e);else{var a=o.CORSConfiguration||{},s=a.CORSRules||a.CORSRule||[];s=i.clone(i.isArray(s)?s:[s]),i.each(s,(function(e){i.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],(function(n){var o=n+"s",r=e[o]||e[n]||[];delete e[n],e[o]=i.isArray(r)?r:[r]}))})),n(null,{"CORSRules":s,"statusCode":o.statusCode,"headers":o.headers})}}))},"deleteBucketCors":function deleteBucketCors(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteBucketCORS","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"cors"},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode||e.statusCode,"headers":o.headers})}))},"getBucketLocation":function getBucketLocation(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketLocation","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"location"},n)},"getBucketPolicy":function getBucketPolicy(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketPolicy","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"policy","rawBody":!0},(function(e,o){if(e)return e.statusCode&&403===e.statusCode?n(i.error(e,{"ErrorStatus":"Access Denied"})):e.statusCode&&405===e.statusCode?n(i.error(e,{"ErrorStatus":"Method Not Allowed"})):e.statusCode&&404===e.statusCode?n(i.error(e,{"ErrorStatus":"Policy Not Found"})):n(e);var r={};try{r=JSON.parse(o.body)}catch(e){}n(null,{"Policy":r,"statusCode":o.statusCode,"headers":o.headers})}))},"putBucketPolicy":function putBucketPolicy(e,n){var o=e.Policy;try{"string"==typeof o&&(o=JSON.parse(o))}catch(e){}if(!o||"string"==typeof o)return n(i.error(new Error("Policy format error")));var r=JSON.stringify(o);o.version||(o.version="2.0");var a=e.Headers;a["Content-Type"]="application/json",a["Content-MD5"]=i.binaryBase64(i.md5(r)),submitRequest.call(this,{"Action":"name/cos:PutBucketPolicy","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"action":"policy","body":r,"headers":a},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"deleteBucketPolicy":function deleteBucketPolicy(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteBucketPolicy","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"policy"},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode||e.statusCode,"headers":o.headers})}))},"putBucketTagging":function putBucketTagging(e,n){var o=e.Tagging||{},r=o.TagSet||o.Tags||e.Tags||[];r=i.clone(i.isArray(r)?r:[r]);var a=i.json2xml({"Tagging":{"TagSet":{"Tag":r}}}),s=e.Headers;s["Content-Type"]="application/xml",s["Content-MD5"]=i.binaryBase64(i.md5(a)),submitRequest.call(this,{"Action":"name/cos:PutBucketTagging","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":a,"action":"tagging","headers":s},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getBucketTagging":function getBucketTagging(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketTagging","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"tagging"},(function(e,o){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)n(e);else{var r={"Tags":[],"statusCode":e.statusCode};e.headers&&(r.headers=e.headers),n(null,r)}else{var a=[];try{a=o.Tagging.TagSet.Tag||[]}catch(e){}a=i.clone(i.isArray(a)?a:[a]),n(null,{"Tags":a,"statusCode":o.statusCode,"headers":o.headers})}}))},"deleteBucketTagging":function deleteBucketTagging(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteBucketTagging","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"tagging"},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"putBucketLifecycle":function putBucketLifecycle(e,n){var o=(e.LifecycleConfiguration||{}).Rules||e.Rules||[];o=i.clone(o);var r=i.json2xml({"LifecycleConfiguration":{"Rule":o}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.binaryBase64(i.md5(r)),submitRequest.call(this,{"Action":"name/cos:PutBucketLifecycle","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":r,"action":"lifecycle","headers":a},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getBucketLifecycle":function getBucketLifecycle(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketLifecycle","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"lifecycle"},(function(e,o){if(e)if(404===e.statusCode&&e.error&&"NoSuchLifecycleConfiguration"===e.error.Code){var r={"Rules":[],"statusCode":e.statusCode};e.headers&&(r.headers=e.headers),n(null,r)}else n(e);else{var a=[];try{a=o.LifecycleConfiguration.Rule||[]}catch(e){}a=i.clone(i.isArray(a)?a:[a]),n(null,{"Rules":a,"statusCode":o.statusCode,"headers":o.headers})}}))},"deleteBucketLifecycle":function deleteBucketLifecycle(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteBucketLifecycle","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"lifecycle"},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"putBucketVersioning":function putBucketVersioning(e,n){if(e.VersioningConfiguration){var o=e.VersioningConfiguration||{},r=i.json2xml({"VersioningConfiguration":o}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.binaryBase64(i.md5(r)),submitRequest.call(this,{"Action":"name/cos:PutBucketVersioning","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":r,"action":"versioning","headers":a},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))}else n(i.error(new Error("missing param VersioningConfiguration")))},"getBucketVersioning":function getBucketVersioning(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketVersioning","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"versioning"},(function(e,o){e||!o.VersioningConfiguration&&(o.VersioningConfiguration={}),n(e,o)}))},"putBucketReplication":function putBucketReplication(e,n){var o=i.clone(e.ReplicationConfiguration),r=i.json2xml({"ReplicationConfiguration":o});r=(r=r.replace(/<(\/?)Rules>/gi,"<$1Rule>")).replace(/<(\/?)Tags>/gi,"<$1Tag>");var a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.binaryBase64(i.md5(r)),submitRequest.call(this,{"Action":"name/cos:PutBucketReplication","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":r,"action":"replication","headers":a},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getBucketReplication":function getBucketReplication(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketReplication","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"replication"},(function(e,o){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"ReplicationConfigurationnotFoundError"!==e.error.Code)n(e);else{var r={"ReplicationConfiguration":{"Rules":[]},"statusCode":e.statusCode};e.headers&&(r.headers=e.headers),n(null,r)}else!o.ReplicationConfiguration&&(o.ReplicationConfiguration={}),o.ReplicationConfiguration.Rule&&(o.ReplicationConfiguration.Rules=i.makeArray(o.ReplicationConfiguration.Rule),delete o.ReplicationConfiguration.Rule),n(e,o)}))},"deleteBucketReplication":function deleteBucketReplication(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteBucketReplication","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"replication"},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"putBucketWebsite":function putBucketWebsite(e,n){if(e.WebsiteConfiguration){var o=i.clone(e.WebsiteConfiguration||{}),r=o.RoutingRules||o.RoutingRule||[];r=i.isArray(r)?r:[r],delete o.RoutingRule,delete o.RoutingRules,r.length&&(o.RoutingRules={"RoutingRule":r});var a=i.json2xml({"WebsiteConfiguration":o}),s=e.Headers;s["Content-Type"]="application/xml",s["Content-MD5"]=i.binaryBase64(i.md5(a)),submitRequest.call(this,{"Action":"name/cos:PutBucketWebsite","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":a,"action":"website","headers":s},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))}else n(i.error(new Error("missing param WebsiteConfiguration")))},"getBucketWebsite":function getBucketWebsite(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketWebsite","method":"GET","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"headers":e.Headers,"action":"website"},(function(e,o){if(e)if(404===e.statusCode&&"NoSuchWebsiteConfiguration"===e.error.Code){var r={"WebsiteConfiguration":{},"statusCode":e.statusCode};e.headers&&(r.headers=e.headers),n(null,r)}else n(e);else{var a=o.WebsiteConfiguration||{};if(a.RoutingRules){var s=i.clone(a.RoutingRules.RoutingRule||[]);s=i.makeArray(s),a.RoutingRules=s}n(null,{"WebsiteConfiguration":a,"statusCode":o.statusCode,"headers":o.headers})}}))},"deleteBucketWebsite":function deleteBucketWebsite(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteBucketWebsite","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"website"},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"putBucketReferer":function putBucketReferer(e,n){if(e.RefererConfiguration){var o=i.clone(e.RefererConfiguration||{}),r=o.DomainList||{},a=r.Domains||r.Domain||[];(a=i.isArray(a)?a:[a]).length&&(o.DomainList={"Domain":a});var s=i.json2xml({"RefererConfiguration":o}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=i.binaryBase64(i.md5(s)),submitRequest.call(this,{"Action":"name/cos:PutBucketReferer","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":s,"action":"referer","headers":c},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))}else n(i.error(new Error("missing param RefererConfiguration")))},"getBucketReferer":function getBucketReferer(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketReferer","method":"GET","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"headers":e.Headers,"action":"referer"},(function(e,o){if(e)if(404===e.statusCode&&"NoSuchRefererConfiguration"===e.error.Code){var r={"WebsiteConfiguration":{},"statusCode":e.statusCode};e.headers&&(r.headers=e.headers),n(null,r)}else n(e);else{var a=o.RefererConfiguration||{};if(a.DomainList){var s=i.clone(a.DomainList.Domain||[]);s=i.makeArray(s),a.DomainList={"Domains":s}}n(null,{"RefererConfiguration":a,"statusCode":o.statusCode,"headers":o.headers})}}))},"putBucketDomain":function putBucketDomain(e,n){var o=(e.DomainConfiguration||{}).DomainRule||e.DomainRule||[];o=i.clone(o);var r=i.json2xml({"DomainConfiguration":{"DomainRule":o}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.binaryBase64(i.md5(r)),submitRequest.call(this,{"Action":"name/cos:PutBucketDomain","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":r,"action":"domain","headers":a},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getBucketDomain":function getBucketDomain(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketDomain","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"domain"},(function(e,o){if(e)return n(e);var r=[];try{r=o.DomainConfiguration.DomainRule||[]}catch(e){}r=i.clone(i.isArray(r)?r:[r]),n(null,{"DomainRule":r,"statusCode":o.statusCode,"headers":o.headers})}))},"deleteBucketDomain":function deleteBucketDomain(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteBucketDomain","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"domain"},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"putBucketOrigin":function putBucketOrigin(e,n){var o=(e.OriginConfiguration||{}).OriginRule||e.OriginRule||[];o=i.clone(o);var r=i.json2xml({"OriginConfiguration":{"OriginRule":o}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.binaryBase64(i.md5(r)),submitRequest.call(this,{"Action":"name/cos:PutBucketOrigin","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":r,"action":"origin","headers":a},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getBucketOrigin":function getBucketOrigin(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketOrigin","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"origin"},(function(e,o){if(e)return n(e);var r=[];try{r=o.OriginConfiguration.OriginRule||[]}catch(e){}r=i.clone(i.isArray(r)?r:[r]),n(null,{"OriginRule":r,"statusCode":o.statusCode,"headers":o.headers})}))},"deleteBucketOrigin":function deleteBucketOrigin(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteBucketOrigin","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"origin"},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"putBucketLogging":function putBucketLogging(e,n){var o=i.json2xml({"BucketLoggingStatus":e.BucketLoggingStatus||""}),r=e.Headers;r["Content-Type"]="application/xml",r["Content-MD5"]=i.binaryBase64(i.md5(o)),submitRequest.call(this,{"Action":"name/cos:PutBucketLogging","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":o,"action":"logging","headers":r},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getBucketLogging":function getBucketLogging(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketLogging","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"logging"},(function(e,o){if(e)return n(e);n(null,{"BucketLoggingStatus":o.BucketLoggingStatus,"statusCode":o.statusCode,"headers":o.headers})}))},"putBucketInventory":function putBucketInventory(e,n){var o=i.clone(e.InventoryConfiguration);if(o.OptionalFields){var r=o.OptionalFields||[];o.OptionalFields={"Field":r}}if(o.Destination&&o.Destination.COSBucketDestination&&o.Destination.COSBucketDestination.Encryption){var a=o.Destination.COSBucketDestination.Encryption;Object.keys(a).indexOf("SSECOS")>-1&&(a["SSE-COS"]=a.SSECOS,delete a.SSECOS)}var s=i.json2xml({"InventoryConfiguration":o}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=i.binaryBase64(i.md5(s)),submitRequest.call(this,{"Action":"name/cos:PutBucketInventory","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":s,"action":"inventory","qs":{"id":e.Id},"headers":c},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getBucketInventory":function getBucketInventory(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketInventory","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"inventory","qs":{"id":e.Id}},(function(e,o){if(e)return n(e);var r=o.InventoryConfiguration;if(r&&r.OptionalFields&&r.OptionalFields.Field){var a=r.OptionalFields.Field;i.isArray(a)||(a=[a]),r.OptionalFields=a}if(r.Destination&&r.Destination.COSBucketDestination&&r.Destination.COSBucketDestination.Encryption){var s=r.Destination.COSBucketDestination.Encryption;Object.keys(s).indexOf("SSE-COS")>-1&&(s.SSECOS=s["SSE-COS"],delete s["SSE-COS"])}n(null,{"InventoryConfiguration":r,"statusCode":o.statusCode,"headers":o.headers})}))},"listBucketInventory":function listBucketInventory(e,n){submitRequest.call(this,{"Action":"name/cos:ListBucketInventory","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"inventory","qs":{"continuation-token":e.ContinuationToken}},(function(e,o){if(e)return n(e);var r=o.ListInventoryConfigurationResult,a=r.InventoryConfiguration||[];a=i.isArray(a)?a:[a],delete r.InventoryConfiguration,i.each(a,(function(e){if(e&&e.OptionalFields&&e.OptionalFields.Field){var n=e.OptionalFields.Field;i.isArray(n)||(n=[n]),e.OptionalFields=n}if(e.Destination&&e.Destination.COSBucketDestination&&e.Destination.COSBucketDestination.Encryption){var o=e.Destination.COSBucketDestination.Encryption;Object.keys(o).indexOf("SSE-COS")>-1&&(o.SSECOS=o["SSE-COS"],delete o["SSE-COS"])}})),r.InventoryConfigurations=a,i.extend(r,{"statusCode":o.statusCode,"headers":o.headers}),n(null,r)}))},"deleteBucketInventory":function deleteBucketInventory(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteBucketInventory","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"inventory","qs":{"id":e.Id}},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"putBucketAccelerate":function putBucketAccelerate(e,n){if(e.AccelerateConfiguration){var o={"AccelerateConfiguration":e.AccelerateConfiguration||{}},r=i.json2xml(o),a={"Content-Type":"application/xml"};a["Content-MD5"]=i.binaryBase64(i.md5(r)),submitRequest.call(this,{"Action":"name/cos:PutBucketAccelerate","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":r,"action":"accelerate","headers":a},(function(e,o){if(e)return n(e);n(null,{"statusCode":o.statusCode,"headers":o.headers})}))}else n(i.error(new Error("missing param AccelerateConfiguration")))},"getBucketAccelerate":function getBucketAccelerate(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketAccelerate","method":"GET","Bucket":e.Bucket,"Region":e.Region,"action":"accelerate"},(function(e,o){e||!o.AccelerateConfiguration&&(o.AccelerateConfiguration={}),n(e,o)}))},"putBucketEncryption":function putBucketEncryption(e,n){var o=e.ServerSideEncryptionConfiguration||{},r=o.Rule||o.Rules||[],a=i.json2xml({"ServerSideEncryptionConfiguration":{"Rule":r}}),s=e.Headers;s["Content-Type"]="application/xml",s["Content-MD5"]=i.binaryBase64(i.md5(a)),submitRequest.call(this,{"Action":"name/cos:PutBucketEncryption","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"body":a,"action":"encryption","headers":s},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getBucketEncryption":function getBucketEncryption(e,n){submitRequest.call(this,{"Action":"name/cos:GetBucketEncryption","method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"encryption"},(function(e,o){if(e)if(404===e.statusCode&&"NoSuchEncryptionConfiguration"===e.code){var r={"EncryptionConfiguration":{"Rules":[]},"statusCode":e.statusCode};e.headers&&(r.headers=e.headers),n(null,r)}else n(e);else{var a=i.makeArray(o.EncryptionConfiguration&&o.EncryptionConfiguration.Rule||[]);o.EncryptionConfiguration={"Rules":a},n(e,o)}}))},"deleteBucketEncryption":function deleteBucketEncryption(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteBucketReplication","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"encryption"},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getObject":function getObject(e,n){var o=e.Query||{},r=e.QueryString||"",a=i.throttleOnProgress.call(this,0,e.onProgress);o["response-content-type"]=e.ResponseContentType,o["response-content-language"]=e.ResponseContentLanguage,o["response-expires"]=e.ResponseExpires,o["response-cache-control"]=e.ResponseCacheControl,o["response-content-disposition"]=e.ResponseContentDisposition,o["response-content-encoding"]=e.ResponseContentEncoding,submitRequest.call(this,{"Action":"name/cos:GetObject","method":"GET","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"VersionId":e.VersionId,"DataType":e.DataType,"headers":e.Headers,"qs":o,"qsStr":r,"rawBody":!0,"onDownloadProgress":a},(function(o,r){if(a(null,!0),o){var s=o.statusCode;return e.Headers["If-Modified-Since"]&&s&&304===s?n(null,{"NotModified":!0}):n(o)}n(null,{"Body":r.body,"ETag":i.attr(r.headers,"etag",""),"statusCode":r.statusCode,"headers":r.headers})}))},"headObject":function headObject(e,n){submitRequest.call(this,{"Action":"name/cos:HeadObject","method":"HEAD","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"VersionId":e.VersionId,"headers":e.Headers},(function(o,r){if(o){var a=o.statusCode;return e.Headers["If-Modified-Since"]&&a&&304===a?n(null,{"NotModified":!0,"statusCode":a}):n(o)}r.ETag=i.attr(r.headers,"etag",""),n(null,r)}))},"listObjectVersions":function listObjectVersions(e,n){var o={};o.prefix=e.Prefix||"",o.delimiter=e.Delimiter,o["key-marker"]=e.KeyMarker,o["version-id-marker"]=e.VersionIdMarker,o["max-keys"]=e.MaxKeys,o["encoding-type"]=e.EncodingType,submitRequest.call(this,{"Action":"name/cos:GetBucketObjectVersions","ResourceKey":o.prefix,"method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"qs":o,"action":"versions"},(function(e,o){if(e)return n(e);var r=o.ListVersionsResult||{},a=r.DeleteMarker||[];a=i.isArray(a)?a:[a];var s=r.Version||[];s=i.isArray(s)?s:[s];var c=i.clone(r);delete c.DeleteMarker,delete c.Version,i.extend(c,{"DeleteMarkers":a,"Versions":s,"statusCode":o.statusCode,"headers":o.headers}),n(null,c)}))},"putObject":function putObject(e,n){var o=this,r=e.ContentLength,a=i.throttleOnProgress.call(o,r,e.onProgress),s=e.Headers;s["Cache-Control"]||s["cache-control"]||(s["Cache-Control"]=""),s["Content-Type"]||s["content-type"]||(s["Content-Type"]=e.Body&&e.Body.type||"");var c=e.UploadAddMetaMd5||o.options.UploadAddMetaMd5||o.options.UploadCheckContentMd5;i.getBodyMd5(c,e.Body,(function(c){c&&(o.options.UploadCheckContentMd5&&(s["Content-MD5"]=i.binaryBase64(c)),(e.UploadAddMetaMd5||o.options.UploadAddMetaMd5)&&(s["x-cos-meta-md5"]=c)),void 0!==e.ContentLength&&(s["Content-Length"]=e.ContentLength),a(null,!0),submitRequest.call(o,{"Action":"name/cos:PutObject","TaskId":e.TaskId,"method":"PUT","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"headers":e.Headers,"qs":e.Query,"body":e.Body,"onProgress":a},(function(s,c){if(s)return a(null,!0),n(s);a({"loaded":r,"total":r},!0);var u=getUrl({"ForcePathStyle":o.options.ForcePathStyle,"protocol":o.options.Protocol,"domain":o.options.Domain,"bucket":e.Bucket,"region":o.options.UseAccelerate?"accelerate":e.Region,"object":e.Key});u=u.substr(u.indexOf("://")+3),c.Location=u,c.ETag=i.attr(c.headers,"etag",""),n(null,c)}))}),e.onHashProgress)},"deleteObject":function deleteObject(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteObject","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"headers":e.Headers,"VersionId":e.VersionId},(function(e,o){if(e){var r=e.statusCode;return r&&404===r?n(null,{"BucketNotFound":!0,"statusCode":r}):n(e)}n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getObjectAcl":function getObjectAcl(e,n){submitRequest.call(this,{"Action":"name/cos:GetObjectACL","method":"GET","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"headers":e.Headers,"action":"acl"},(function(e,o){if(e)return n(e);var r=o.AccessControlPolicy||{},a=r.Owner||{},s=r.AccessControlList&&r.AccessControlList.Grant||[];s=i.isArray(s)?s:[s];var c=decodeAcl(r);delete c.GrantWrite,o.headers&&o.headers["x-cos-acl"]&&(c.ACL=o.headers["x-cos-acl"]),c=i.extend(c,{"Owner":a,"Grants":s,"statusCode":o.statusCode,"headers":o.headers}),n(null,c)}))},"putObjectAcl":function putObjectAcl(e,n){var o=e.Headers,r="";if(e.AccessControlPolicy){var a=i.clone(e.AccessControlPolicy||{}),s=a.Grants||a.Grant;s=i.isArray(s)?s:[s],delete a.Grant,delete a.Grants,a.AccessControlList={"Grant":s},r=i.json2xml({"AccessControlPolicy":a}),o["Content-Type"]="application/xml",o["Content-MD5"]=i.binaryBase64(i.md5(r))}i.each(o,(function(e,n){0===n.indexOf("x-cos-grant-")&&(o[n]=uniqGrant(o[n]))})),submitRequest.call(this,{"Action":"name/cos:PutObjectACL","method":"PUT","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"action":"acl","headers":o,"body":r},(function(e,o){if(e)return n(e);n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"optionsObject":function optionsObject(e,n){var o=e.Headers;o.Origin=e.Origin,o["Access-Control-Request-Method"]=e.AccessControlRequestMethod,o["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,submitRequest.call(this,{"Action":"name/cos:OptionsObject","method":"OPTIONS","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"headers":o},(function(e,o){if(e)return e.statusCode&&403===e.statusCode?n(null,{"OptionsForbidden":!0,"statusCode":e.statusCode}):n(e);var r=o.headers||{};n(null,{"AccessControlAllowOrigin":r["access-control-allow-origin"],"AccessControlAllowMethods":r["access-control-allow-methods"],"AccessControlAllowHeaders":r["access-control-allow-headers"],"AccessControlExposeHeaders":r["access-control-expose-headers"],"AccessControlMaxAge":r["access-control-max-age"],"statusCode":o.statusCode,"headers":o.headers})}))},"putObjectCopy":function putObjectCopy(e,n){var o=this,r=e.Headers;r["Cache-Control"]||r["cache-control"]||(r["Cache-Control"]="");var a=(e.CopySource||"").match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(a){var s=a[1],c=a[3],u=decodeURIComponent(a[4]);submitRequest.call(this,{"Scope":[{"action":"name/cos:GetObject","bucket":s,"region":c,"prefix":u},{"action":"name/cos:PutObject","bucket":e.Bucket,"region":e.Region,"prefix":e.Key}],"method":"PUT","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"VersionId":e.VersionId,"headers":e.Headers},(function(r,a){if(r)return n(r);var s=i.clone(a.CopyObjectResult||{}),c=getUrl({"ForcePathStyle":o.options.ForcePathStyle,"protocol":o.options.Protocol,"domain":o.options.Domain,"bucket":e.Bucket,"region":e.Region,"object":e.Key,"isLocation":!0});i.extend(s,{"Location":c,"statusCode":a.statusCode,"headers":a.headers}),n(null,s)}))}else n(i.error(new Error("CopySource format error")))},"deleteMultipleObject":function deleteMultipleObject(e,n){var o=e.Objects||[],r=e.Quiet;o=i.isArray(o)?o:[o];var a=i.json2xml({"Delete":{"Object":o,"Quiet":r||!1}}),s=e.Headers;s["Content-Type"]="application/xml",s["Content-MD5"]=i.binaryBase64(i.md5(a));var c=i.map(o,(function(n){return{"action":"name/cos:DeleteObject","bucket":e.Bucket,"region":e.Region,"prefix":n.Key}}));submitRequest.call(this,{"Scope":c,"method":"POST","Bucket":e.Bucket,"Region":e.Region,"body":a,"action":"delete","headers":s},(function(e,o){if(e)return n(e);var r=o.DeleteResult||{},a=r.Deleted||[],s=r.Error||[];a=i.isArray(a)?a:[a],s=i.isArray(s)?s:[s];var c=i.clone(r);i.extend(c,{"Error":s,"Deleted":a,"statusCode":o.statusCode,"headers":o.headers}),n(null,c)}))},"restoreObject":function restoreObject(e,n){var o=e.Headers;if(e.RestoreRequest){var r=e.RestoreRequest||{},a=i.json2xml({"RestoreRequest":r});o["Content-Type"]="application/xml",o["Content-MD5"]=i.binaryBase64(i.md5(a)),submitRequest.call(this,{"Action":"name/cos:RestoreObject","method":"POST","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"VersionId":e.VersionId,"body":a,"action":"restore","headers":o},n)}else n(i.error(new Error("missing param RestoreRequest")))},"putObjectTagging":function putObjectTagging(e,n){var o=e.Tagging||{},r=o.TagSet||o.Tags||e.Tags||[];r=i.clone(i.isArray(r)?r:[r]);var a=i.json2xml({"Tagging":{"TagSet":{"Tag":r}}}),s=e.Headers;s["Content-Type"]="application/xml",s["Content-MD5"]=i.binaryBase64(i.md5(a)),submitRequest.call(this,{"Action":"name/cos:PutObjectTagging","method":"PUT","Bucket":e.Bucket,"Key":e.Key,"Region":e.Region,"body":a,"action":"tagging","headers":s,"VersionId":e.VersionId},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"getObjectTagging":function getObjectTagging(e,n){submitRequest.call(this,{"Action":"name/cos:GetObjectTagging","method":"GET","Key":e.Key,"Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"action":"tagging","VersionId":e.VersionId},(function(e,o){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)n(e);else{var r={"Tags":[],"statusCode":e.statusCode};e.headers&&(r.headers=e.headers),n(null,r)}else{var a=[];try{a=o.Tagging.TagSet.Tag||[]}catch(e){}a=i.clone(i.isArray(a)?a:[a]),n(null,{"Tags":a,"statusCode":o.statusCode,"headers":o.headers})}}))},"deleteObjectTagging":function deleteObjectTagging(e,n){submitRequest.call(this,{"Action":"name/cos:DeleteObjectTagging","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"headers":e.Headers,"action":"tagging","VersionId":e.VersionId},(function(e,o){return e&&204===e.statusCode?n(null,{"statusCode":e.statusCode}):e?n(e):void n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"selectObjectContent":function selectObjectContent(e,n){if(!e.SelectType)return n(i.error(new Error("missing param SelectType")));var o=e.SelectRequest||{},r=i.json2xml({"SelectRequest":o}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.binaryBase64(i.md5(r)),submitRequest.call(this,{"Action":"name/cos:GetObject","method":"POST","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"headers":e.Headers,"action":"select","qs":{"select-type":e.SelectType},"VersionId":e.VersionId,"body":r,"DataType":"arraybuffer","rawBody":!0},(function(e,o){if(e&&204===e.statusCode)return n(null,{"statusCode":e.statusCode});if(e)return n(e);var r=i.parseSelectPayload(o.body);n(null,{"statusCode":o.statusCode,"headers":o.headers,"Body":r.body,"Payload":r.payload})}))},"uploadPartCopy":function uploadPartCopy(e,n){var o=(e.CopySource||"").match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(o){var r=o[1],a=o[3],s=decodeURIComponent(o[4]);submitRequest.call(this,{"Scope":[{"action":"name/cos:GetObject","bucket":r,"region":a,"prefix":s},{"action":"name/cos:PutObject","bucket":e.Bucket,"region":e.Region,"prefix":e.Key}],"method":"PUT","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"VersionId":e.VersionId,"qs":{"partNumber":e.PartNumber,"uploadId":e.UploadId},"headers":e.Headers},(function(e,o){if(e)return n(e);var r=i.clone(o.CopyPartResult||{});i.extend(r,{"statusCode":o.statusCode,"headers":o.headers}),n(null,r)}))}else n(i.error(new Error("CopySource format error")))},"multipartInit":function multipartInit(e,n){var o=this,r=e.Headers;r["Cache-Control"]||r["cache-control"]||(r["Cache-Control"]=""),r["Content-Type"]||r["content-type"]||(r["Content-Type"]=e.Body&&e.Body.type||""),i.getBodyMd5(e.Body&&(e.UploadAddMetaMd5||o.options.UploadAddMetaMd5),e.Body,(function(r){r&&(e.Headers["x-cos-meta-md5"]=r),submitRequest.call(o,{"Action":"name/cos:InitiateMultipartUpload","method":"POST","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"action":"uploads","headers":e.Headers,"qs":e.Query},(function(e,o){return e?n(e):(o=i.clone(o||{}))&&o.InitiateMultipartUploadResult?n(null,i.extend(o.InitiateMultipartUploadResult,{"statusCode":o.statusCode,"headers":o.headers})):void n(null,o)}))}),e.onHashProgress)},"multipartUpload":function multipartUpload(e,n){var o=this;i.getFileSize("multipartUpload",e,(function(){i.getBodyMd5(o.options.UploadCheckContentMd5,e.Body,(function(r){r&&(e.Headers["Content-MD5"]=i.binaryBase64(r)),submitRequest.call(o,{"Action":"name/cos:UploadPart","TaskId":e.TaskId,"method":"PUT","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"qs":{"partNumber":e.PartNumber,"uploadId":e.UploadId},"headers":e.Headers,"onProgress":e.onProgress,"body":e.Body||null},(function(e,o){if(e)return n(e);n(null,{"ETag":i.attr(o.headers,"etag",""),"statusCode":o.statusCode,"headers":o.headers})}))}))}))},"multipartComplete":function multipartComplete(e,n){for(var o=this,r=e.UploadId,a=e.Parts,s=0,c=a.length;s<c;s++)0!==a[s].ETag.indexOf('"')&&(a[s].ETag='"'+a[s].ETag+'"');var u=i.json2xml({"CompleteMultipartUpload":{"Part":a}});u=u.replace(/\n\s*/g,"");var l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=i.binaryBase64(i.md5(u)),submitRequest.call(this,{"Action":"name/cos:CompleteMultipartUpload","method":"POST","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"qs":{"uploadId":r},"body":u,"headers":l},(function(r,a){if(r)return n(r);var s=getUrl({"ForcePathStyle":o.options.ForcePathStyle,"protocol":o.options.Protocol,"domain":o.options.Domain,"bucket":e.Bucket,"region":e.Region,"object":e.Key,"isLocation":!0}),c=a.CompleteMultipartUploadResult||{};c.ProcessResults&&c&&c.ProcessResults&&(c.UploadResult={"OriginalInfo":{"Key":c.Key,"Location":s,"ETag":c.ETag,"ImageInfo":c.ImageInfo},"ProcessResults":c.ProcessResults},delete c.ImageInfo,delete c.ProcessResults);var u=i.extend(c,{"Location":s,"statusCode":a.statusCode,"headers":a.headers});n(null,u)}))},"multipartList":function multipartList(e,n){var o={};o.delimiter=e.Delimiter,o["encoding-type"]=e.EncodingType,o.prefix=e.Prefix||"",o["max-uploads"]=e.MaxUploads,o["key-marker"]=e.KeyMarker,o["upload-id-marker"]=e.UploadIdMarker,o=i.clearKey(o),submitRequest.call(this,{"Action":"name/cos:ListMultipartUploads","ResourceKey":o.prefix,"method":"GET","Bucket":e.Bucket,"Region":e.Region,"headers":e.Headers,"qs":o,"action":"uploads"},(function(e,o){if(e)return n(e);if(o&&o.ListMultipartUploadsResult){var r=o.ListMultipartUploadsResult.Upload||[];r=i.isArray(r)?r:[r],o.ListMultipartUploadsResult.Upload=r}var a=i.clone(o.ListMultipartUploadsResult||{});i.extend(a,{"statusCode":o.statusCode,"headers":o.headers}),n(null,a)}))},"multipartListPart":function multipartListPart(e,n){var o={};o.uploadId=e.UploadId,o["encoding-type"]=e.EncodingType,o["max-parts"]=e.MaxParts,o["part-number-marker"]=e.PartNumberMarker,submitRequest.call(this,{"Action":"name/cos:ListParts","method":"GET","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"headers":e.Headers,"qs":o},(function(e,o){if(e)return n(e);var r=o.ListPartsResult||{},a=r.Part||[];a=i.isArray(a)?a:[a],r.Part=a;var s=i.clone(r);i.extend(s,{"statusCode":o.statusCode,"headers":o.headers}),n(null,s)}))},"multipartAbort":function multipartAbort(e,n){var o={};o.uploadId=e.UploadId,submitRequest.call(this,{"Action":"name/cos:AbortMultipartUpload","method":"DELETE","Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"headers":e.Headers,"qs":o},(function(e,o){if(e)return n(e);n(null,{"statusCode":o.statusCode,"headers":o.headers})}))},"request":function request(e,n){submitRequest.call(this,{"method":e.Method,"Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"action":e.Action,"headers":e.Headers,"qs":e.Query,"body":e.Body},(function(e,o){if(e)return n(e);o&&o.body&&(o.Body=o.body,delete o.body),n(e,o)}))},"getObjectUrl":function getObjectUrl(e,n){var o=getUrl({"ForcePathStyle":this.options.ForcePathStyle,"protocol":e.Protocol||this.options.Protocol,"domain":e.Domain||this.options.Domain,"bucket":e.Bucket,"region":e.Region,"object":e.Key}),r="";e.Query&&(r+=i.obj2str(e.Query)),e.QueryString&&(r+=(r?"&":"")+e.QueryString);var a=o;if(void 0!==e.Sign&&!e.Sign)return r&&(a+="?"+r),n(null,{"Url":a}),a;var s=getAuthorizationAsync.call(this,{"Action":"PUT"===(e.Method||"").toUpperCase()?"name/cos:PutObject":"name/cos:GetObject","Bucket":e.Bucket||"","Region":e.Region||"","Method":e.Method||"get","Key":e.Key,"Expires":e.Expires},(function(e,i){if(n)if(e)n(e);else{var a=o;a+="?"+(i.Authorization.indexOf("q-signature")>-1?i.Authorization:"sign="+encodeURIComponent(i.Authorization)),i.SecurityToken&&(a+="&x-cos-security-token="+i.SecurityToken),i.ClientIP&&(a+="&clientIP="+i.ClientIP),i.ClientUA&&(a+="&clientUA="+i.ClientUA),i.Token&&(a+="&token="+i.Token),r&&(a+="&"+r),setTimeout((function(){n(null,{"Url":a})}))}}));return s?(a+="?"+s.Authorization+(s.SecurityToken?"&x-cos-security-token="+s.SecurityToken:""),r&&(a+="&"+r)):r&&(a+="?"+r),a},"getAuth":function getAuth(e){return i.getAuth({"SecretId":e.SecretId||this.options.SecretId||"","SecretKey":e.SecretKey||this.options.SecretKey||"","Method":e.Method,"Key":e.Key,"Query":e.Query,"Headers":e.Headers,"Expires":e.Expires,"UseRawKey":this.options.UseRawKey,"SystemClockOffset":this.options.SystemClockOffset})}};e.exports.init=function(e,n){n.transferToTaskMethod(a,"putObject"),i.each(a,(function(n,o){e.prototype[o]=i.apiWrapper(o,n),function warnOldApi(e,n,o){i.each(["Cors","Acl"],(function(r){if(e.slice(-r.length)===r){var a=e.slice(0,-r.length)+r.toUpperCase(),s=i.apiWrapper(e,n),c=!1;o[a]=function(){!c&&console.warn("warning: cos."+a+" has been deprecated. Please Use cos."+e+" instead."),c=!0,s.apply(this,arguments)}}}))}(o,n,e.prototype)}))}},"291":function(e,n,o){var r=o(27),i=function stringifyPrimitive(e){switch(r(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},a=function xhrRes(e,n,o){var r={};return n.getAllResponseHeaders().trim().split("\n").forEach((function(e){if(e){var n=e.indexOf(":"),o=e.substr(0,n).trim().toLowerCase(),i=e.substr(n+1).trim();r[o]=i}})),{"error":e,"statusCode":n.status,"statusMessage":n.statusText,"headers":r,"body":o}},s=function xhrBody(e,n){return n||"text"!==n?e.response:e.responseText};e.exports=function request(e,n){var o=(e.method||"GET").toUpperCase(),c=e.url;if(e.qs){var u=function queryStringify(e,n,o,a){return n=n||"&",o=o||"=",null===e&&(e=void 0),"object"===r(e)?Object.keys(e).map((function(r){var a=encodeURIComponent(i(r))+o;return Array.isArray(e[r])?e[r].map((function(e){return a+encodeURIComponent(i(e))})).join(n):a+encodeURIComponent(i(e[r]))})).filter(Boolean).join(n):a?encodeURIComponent(i(a))+o+encodeURIComponent(i(e)):""}(e.qs);u&&(c+=(-1===c.indexOf("?")?"?":"&")+u)}var l=new XMLHttpRequest;l.open(o,c,!0),l.responseType=e.dataType||"text";var d=e.headers;if(d)for(var f in d)d.hasOwnProperty(f)&&"content-length"!==f.toLowerCase()&&"user-agent"!==f.toLowerCase()&&"origin"!==f.toLowerCase()&&"host"!==f.toLowerCase()&&l.setRequestHeader(f,d[f]);return e.onProgress&&l.upload&&(l.upload.onprogress=e.onProgress),e.onDownloadProgress&&(l.onprogress=e.onDownloadProgress),l.onload=function(){n(a(null,l,s(l,e.dataType)))},l.onerror=function(o){var r=s(l,e.dataType);if(r)n(a(null,l,r));else{var i=l.statusText;i||0!==l.status||(i=new Error("CORS blocked or network error")),n(a(i,l,r))}},l.send(e.body||""),l}},"292":function(e,n,o){var r=o(27),i=o(239),a=o(293),s=o(238).EventProxy,c=o(220);function getUploadIdAndPartList(e,n){var o=e.TaskId,r=e.Bucket,u=e.Region,l=e.Key,d=e.StorageClass,f=this,h={},g=e.FileSize,y=e.SliceSize,C=Math.ceil(g/y),v=0,k=c.throttleOnProgress.call(f,g,e.onHashProgress),R=function isAvailableUploadList(n,o){var r=n.length;if(0===r)return o(null,!0);if(r>C)return o(null,!1);if(r>1&&Math.max(n[0].Size,n[1].Size)!==y)return o(null,!1);!function next(i){if(i<r){var a=n[i];!function getChunkETag(n,o){var r=y*(n-1),i=Math.min(r+y,g),a=i-r;h[n]?o(null,{"PartNumber":n,"ETag":h[n],"Size":a}):c.fileSlice(e.Body,r,i,!1,(function(e){c.getFileMd5(e,(function(e,r){if(e)return o(c.error(e));var i='"'+r+'"';h[n]=i,1,k({"loaded":v+=a,"total":g}),o(null,{"PartNumber":n,"ETag":i,"Size":a})}))}))}(a.PartNumber,(function(e,n){n&&n.ETag===a.ETag&&n.Size===a.Size?next(i+1):o(null,!1)}))}else o(null,!0)}(0)},S=new s;S.on("error",(function(e){if(f._isRunningTask(o))return n(e)})),S.on("upload_id_available",(function(e){var o={},r=[];c.each(e.PartList,(function(e){o[e.PartNumber]=e}));for(var i=1;i<=C;i++){var a=o[i];a?(a.PartNumber=i,a.Uploaded=!0):a={"PartNumber":i,"ETag":null,"Uploaded":!1},r.push(a)}e.PartList=r,n(null,e)})),S.on("no_available_upload_id",(function(){if(f._isRunningTask(o)){var i=c.extend({"Bucket":r,"Region":u,"Key":l,"Headers":c.clone(e.Headers),"Query":c.clone(e.Query),"StorageClass":d,"Body":e.Body},e);f.multipartInit(i,(function(e,r){if(f._isRunningTask(o)){if(e)return S.emit("error",e);var i=r.UploadId;if(!i)return n(c.error(new Error("no such upload id")));S.emit("upload_id_available",{"UploadId":i,"PartList":[]})}}))}})),S.on("has_and_check_upload_id",(function(e){e=e.reverse(),a.eachLimit(e,1,(function(e,n){f._isRunningTask(o)&&(i.using[e]?n():wholeMultipartListPart.call(f,{"Bucket":r,"Region":u,"Key":l,"UploadId":e},(function(r,a){if(f._isRunningTask(o)){if(r)return i.removeUsing(e),S.emit("error",r);var s=a.PartList;s.forEach((function(e){e.PartNumber*=1,e.Size*=1,e.ETag=e.ETag||""})),R(s,(function(r,i){if(f._isRunningTask(o))return r?S.emit("error",r):void(i?n({"UploadId":e,"PartList":s}):n())}))}})))}),(function(e){f._isRunningTask(o)&&(k(null,!0),e&&e.UploadId?S.emit("upload_id_available",e):S.emit("no_available_upload_id"))}))})),S.on("seek_local_avail_upload_id",(function(n){var a=i.getFileId(e.Body,e.ChunkSize,r,l),s=i.getUploadIdList.call(f,a);if(a&&s){!function next(e){if(e>=s.length)S.emit("has_and_check_upload_id",n);else{var a=s[e];if(!c.isInArray(n,a))return i.removeUploadId.call(f,a),void next(e+1);i.using[a]?next(e+1):wholeMultipartListPart.call(f,{"Bucket":r,"Region":u,"Key":l,"UploadId":a},(function(n,r){f._isRunningTask(o)&&(n?(i.removeUploadId.call(f,a),next(e+1)):S.emit("upload_id_available",{"UploadId":a,"PartList":r.PartList}))}))}}(0)}else S.emit("has_and_check_upload_id",n)})),S.on("get_remote_upload_id_list",(function(){wholeMultipartList.call(f,{"Bucket":r,"Region":u,"Key":l},(function(n,a){if(f._isRunningTask(o)){if(n)return S.emit("error",n);var s=c.filter(a.UploadList,(function(e){return e.Key===l&&(!d||e.StorageClass.toUpperCase()===d.toUpperCase())})).reverse().map((function(e){return e.UploadId||e.UploadID}));if(s.length)S.emit("seek_local_avail_upload_id",s);else{var u,h=i.getFileId(e.Body,e.ChunkSize,r,l);h&&(u=i.getUploadIdList.call(f,h))&&c.each(u,(function(e){i.removeUploadId.call(f,e)})),S.emit("no_available_upload_id")}}}))})),S.emit("get_remote_upload_id_list")}function wholeMultipartList(e,n){var o=this,r=[],i={"Bucket":e.Bucket,"Region":e.Region,"Prefix":e.Key};!function next(){o.multipartList(i,(function(e,o){if(e)return n(e);r.push.apply(r,o.Upload||[]),"true"===o.IsTruncated?(i.KeyMarker=o.NextKeyMarker,i.UploadIdMarker=o.NextUploadIdMarker,next()):n(null,{"UploadList":r})}))}()}function wholeMultipartListPart(e,n){var o=this,r=[],i={"Bucket":e.Bucket,"Region":e.Region,"Key":e.Key,"UploadId":e.UploadId};!function next(){o.multipartListPart(i,(function(e,o){if(e)return n(e);r.push.apply(r,o.Part||[]),"true"===o.IsTruncated?(i.PartNumberMarker=o.NextPartNumberMarker,next()):n(null,{"PartList":r})}))}()}function uploadSliceList(e,n){var o=this,r=e.TaskId,i=e.Bucket,s=e.Region,u=e.Key,l=e.UploadData,d=e.FileSize,f=e.SliceSize,h=Math.min(e.AsyncLimit||o.options.ChunkParallelLimit||1,256),g=e.Body,y=Math.ceil(d/f),C=0,v=e.ServerSideEncryption,k=c.filter(l.PartList,(function(e){return e.Uploaded&&(C+=e.PartNumber>=y&&d%f||f),!e.Uploaded})),R=e.onProgress;a.eachLimit(k,h,(function(e,n){if(o._isRunningTask(r)){var a=e.PartNumber,c=Math.min(d,e.PartNumber*f)-(e.PartNumber-1)*f,h=0;uploadSliceItem.call(o,{"TaskId":r,"Bucket":i,"Region":s,"Key":u,"SliceSize":f,"FileSize":d,"PartNumber":a,"ServerSideEncryption":v,"Body":g,"UploadData":l,"onProgress":function onProgress(e){C+=e.loaded-h,h=e.loaded,R({"loaded":C,"total":d})}},(function(i,a){o._isRunningTask(r)&&(i||a.ETag||(i='get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )'),i?C-=h:(C+=c-h,e.ETag=a.ETag),R({"loaded":C,"total":d}),n(i||null,a))}))}}),(function(e){if(o._isRunningTask(r))return e?n(e):void n(null,{"UploadId":l.UploadId,"SliceList":l.PartList})}))}function uploadSliceItem(e,n){var o=this,r=e.TaskId,i=e.Bucket,s=e.Region,u=e.Key,l=e.FileSize,d=e.Body,f=1*e.PartNumber,h=e.SliceSize,g=e.ServerSideEncryption,y=e.UploadData,C=o.options.ChunkRetryTimes+1,v=h*(f-1),k=h,R=v+h;R>l&&(k=(R=l)-v);var S=y.PartList[f-1];a.retry(C,(function(n){o._isRunningTask(r)&&c.fileSlice(d,v,R,!0,(function(a){o.multipartUpload({"TaskId":r,"Bucket":i,"Region":s,"Key":u,"ContentLength":k,"PartNumber":f,"UploadId":y.UploadId,"ServerSideEncryption":g,"Body":a,"onProgress":e.onProgress},(function(e,i){if(o._isRunningTask(r))return e?n(e):(S.Uploaded=!0,n(null,i))}))}))}),(function(e,i){if(o._isRunningTask(r))return n(e,i)}))}function uploadSliceComplete(e,n){var o=e.Bucket,r=e.Region,i=e.Key,s=e.UploadId,c=e.SliceList,u=this,l=this.options.ChunkRetryTimes+1,d=e.Headers,f=c.map((function(e){return{"PartNumber":e.PartNumber,"ETag":e.ETag}}));a.retry(l,(function(e){u.multipartComplete({"Bucket":o,"Region":r,"Key":i,"UploadId":s,"Parts":f,"Headers":d},e)}),(function(e,o){n(e,o)}))}function abortUploadTaskArray(e,n){var o=e.Bucket,r=e.Region,i=e.Key,s=e.AbortArray,c=e.AsyncLimit||1,u=this,l=0,d=new Array(s.length);a.eachLimit(s,c,(function(n,a){var s=l;if(i&&i!==n.Key)return d[s]={"error":{"KeyNotMatch":!0}},void a(null);var c=n.UploadId||n.UploadID;u.multipartAbort({"Bucket":o,"Region":r,"Key":n.Key,"Headers":e.Headers,"UploadId":c},(function(e){var i={"Bucket":o,"Region":r,"Key":n.Key,"UploadId":c};d[s]={"error":e,"task":i},a(null)})),l++}),(function(e){if(e)return n(e);for(var o=[],r=[],i=0,a=d.length;i<a;i++){var s=d[i];s.task&&(s.error?r.push(s.task):o.push(s.task))}return n(null,{"successList":o,"errorList":r})}))}function copySliceItem(e,n){var o=e.TaskId,r=e.Bucket,i=e.Region,s=e.Key,c=e.CopySource,u=e.UploadId,l=1*e.PartNumber,d=e.CopySourceRange,f=this.options.ChunkRetryTimes+1,h=this;a.retry(f,(function(e){h.uploadPartCopy({"TaskId":o,"Bucket":r,"Region":i,"Key":s,"CopySource":c,"UploadId":u,"PartNumber":l,"CopySourceRange":d},(function(n,o){e(n||null,o)}))}),(function(e,o){return n(e,o)}))}var u={"sliceUploadFile":function sliceUploadFile(e,n){var o,r,a=this,u=new s,l=e.TaskId,d=e.Bucket,f=e.Region,h=e.Key,g=e.Body,y=e.ChunkSize||e.SliceSize||a.options.ChunkSize,C=e.AsyncLimit,v=e.StorageClass,k=e.ServerSideEncryption,R=e.onHashProgress;u.on("error",(function(e){if(a._isRunningTask(l))return n(e)})),u.on("upload_complete",(function(e){n(null,e)})),u.on("upload_slice_complete",(function(n){var s={};c.each(e.Headers,(function(e,n){var o=n.toLowerCase();0!==o.indexOf("x-cos-meta-")&&"pic-operations"!==o||(s[n]=e)})),uploadSliceComplete.call(a,{"Bucket":d,"Region":f,"Key":h,"UploadId":n.UploadId,"SliceList":n.SliceList,"Headers":s},(function(e,s){if(a._isRunningTask(l)){if(i.removeUsing(n.UploadId),e)return r(null,!0),u.emit("error",e);i.removeUploadId.call(a,n.UploadId),r({"loaded":o,"total":o},!0),u.emit("upload_complete",s)}}))})),u.on("get_upload_data_finish",(function(n){var s=i.getFileId(g,e.ChunkSize,d,h);s&&i.saveUploadId.call(a,s,n.UploadId,a.options.UploadIdCacheLimit),i.setUsing(n.UploadId),r(null,!0),uploadSliceList.call(a,{"TaskId":l,"Bucket":d,"Region":f,"Key":h,"Body":g,"FileSize":o,"SliceSize":y,"AsyncLimit":C,"ServerSideEncryption":k,"UploadData":n,"onProgress":r},(function(e,n){if(a._isRunningTask(l))return e?(r(null,!0),u.emit("error",e)):void u.emit("upload_slice_complete",n)}))})),u.on("get_file_size_finish",(function(){if(r=c.throttleOnProgress.call(a,o,e.onProgress),e.UploadData.UploadId)u.emit("get_upload_data_finish",e.UploadData);else{var n=c.extend({"TaskId":l,"Bucket":d,"Region":f,"Key":h,"Headers":e.Headers,"StorageClass":v,"Body":g,"FileSize":o,"SliceSize":y,"onHashProgress":R},e);getUploadIdAndPartList.call(a,n,(function(n,o){if(a._isRunningTask(l)){if(n)return u.emit("error",n);e.UploadData.UploadId=o.UploadId,e.UploadData.PartList=o.PartList,u.emit("get_upload_data_finish",e.UploadData)}}))}})),o=e.ContentLength,delete e.ContentLength,!e.Headers&&(e.Headers={}),c.each(e.Headers,(function(n,o){"content-length"===o.toLowerCase()&&delete e.Headers[o]})),function(){for(var n=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],r=1048576,i=0;i<n.length&&!(o/(r=1024*n[i]*1024)<=a.options.MaxPartNumber);i++);e.ChunkSize=e.SliceSize=y=Math.max(y,r)}(),0===o?(e.Body="",e.ContentLength=0,e.SkipTask=!0,a.putObject(e,n)):u.emit("get_file_size_finish")},"abortUploadTask":function abortUploadTask(e,n){var o=e.Bucket,r=e.Region,i=e.Key,a=e.UploadId,u=e.Level||"task",l=e.AsyncLimit,d=this,f=new s;if(f.on("error",(function(e){return n(e)})),f.on("get_abort_array",(function(a){abortUploadTaskArray.call(d,{"Bucket":o,"Region":r,"Key":i,"Headers":e.Headers,"AsyncLimit":l,"AbortArray":a},n)})),"bucket"===u)wholeMultipartList.call(d,{"Bucket":o,"Region":r},(function(e,o){if(e)return n(e);f.emit("get_abort_array",o.UploadList||[])}));else if("file"===u){if(!i)return n(c.error(new Error("abort_upload_task_no_key")));wholeMultipartList.call(d,{"Bucket":o,"Region":r,"Key":i},(function(e,o){if(e)return n(e);f.emit("get_abort_array",o.UploadList||[])}))}else{if("task"!==u)return n(c.error(new Error("abort_unknown_level")));if(!a)return n(c.error(new Error("abort_upload_task_no_id")));if(!i)return n(c.error(new Error("abort_upload_task_no_key")));f.emit("get_abort_array",[{"Key":i,"UploadId":a}])}},"uploadFiles":function uploadFiles(e,n){var o=void 0===e.SliceSize?this.options.SliceSize:e.SliceSize,i=0,a=0,s=c.throttleOnProgress.call(this,a,e.onProgress),u=e.files.length,l=e.onFileFinish,d=Array(u),f=function onTotalFileFinish(e,o,r){s(null,!0),l&&l(e,o,r),d[r.Index]={"options":r,"error":e,"data":o},--u<=0&&n&&n(null,{"files":d})},h=[];c.each(e.files,(function(e,n){!function(){var u=e.Body,l=u.size||u.length||0,d={"Index":n,"TaskId":""};i+=l,c.each(e,(function(e,n){"object"!==r(e)&&"function"!=typeof e&&(d[n]=e)}));var g=e.onTaskReady;e.onTaskReady=function onTaskReady(e){d.TaskId=e,g&&g(e)};var y=0,C=e.onProgress;e.onProgress=function onProgress(e){a=a-y+e.loaded,y=e.loaded,C&&C(e),s({"loaded":a,"total":i})};var v=e.onFileFinish,k=l>o?"sliceUploadFile":"putObject";h.push({"api":k,"params":e,"callback":function onFileFinish(e,n){v&&v(e,n),f&&f(e,n,d)}})}()})),this._addTasks(h)},"sliceCopyFile":function sliceCopyFile(e,n){var o=new s,r=this,i=e.Bucket,u=e.Region,l=e.Key,d=e.CopySource,f=d.match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(f){var h=f[1],g=f[3],y=decodeURIComponent(f[4]),C=void 0===e.CopySliceSize?r.options.CopySliceSize:e.CopySliceSize;C=Math.max(0,C);var v,k,R=e.CopyChunkSize||this.options.CopyChunkSize,S=this.options.CopyChunkParallelLimit,b=0;o.on("copy_slice_complete",(function(o){var a={};c.each(e.Headers,(function(e,n){0===n.toLowerCase().indexOf("x-cos-meta-")&&(a[n]=e)}));var s=c.map(o.PartList,(function(e){return{"PartNumber":e.PartNumber,"ETag":e.ETag}}));r.multipartComplete({"Bucket":i,"Region":u,"Key":l,"UploadId":o.UploadId,"Parts":s},(function(e,o){if(e)return k(null,!0),n(e);k({"loaded":v,"total":v},!0),n(null,o)}))})),o.on("get_copy_data_finish",(function(e){a.eachLimit(e.PartList,S,(function(n,o){var a=n.PartNumber,s=n.CopySourceRange,c=n.end-n.start;copySliceItem.call(r,{"Bucket":i,"Region":u,"Key":l,"CopySource":d,"UploadId":e.UploadId,"PartNumber":a,"CopySourceRange":s},(function(e,r){if(e)return o(e);k({"loaded":b+=c,"total":v}),n.ETag=r.ETag,o(e||null,r)}))}),(function(r){if(r)return k(null,!0),n(r);o.emit("copy_slice_complete",e)}))})),o.on("get_file_size_finish",(function(a){var s;if(function(){for(var n=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],o=1048576,i=0;i<n.length&&!(v/(o=1024*n[i]*1024)<=r.options.MaxPartNumber);i++);e.ChunkSize=R=Math.max(R,o);for(var a=Math.ceil(v/R),s=[],c=1;c<=a;c++){var u=(c-1)*R,l=c*R<v?c*R-1:v-1,d={"PartNumber":c,"start":u,"end":l,"CopySourceRange":"bytes="+u+"-"+l};s.push(d)}e.PartList=s}(),(s="Replaced"===e.Headers["x-cos-metadata-directive"]?e.Headers:a)["x-cos-storage-class"]=e.Headers["x-cos-storage-class"]||a["x-cos-storage-class"],s=c.clearKey(s),"ARCHIVE"===a["x-cos-storage-class"]||"DEEP_ARCHIVE"===a["x-cos-storage-class"]){var d=a["x-cos-restore"];if(!d||'ongoing-request="true"'===d)return void n(c.error(new Error("Unrestored archive object is not allowed to be copied")))}delete s["x-cos-copy-source"],delete s["x-cos-metadata-directive"],delete s["x-cos-copy-source-If-Modified-Since"],delete s["x-cos-copy-source-If-Unmodified-Since"],delete s["x-cos-copy-source-If-Match"],delete s["x-cos-copy-source-If-None-Match"],r.multipartInit({"Bucket":i,"Region":u,"Key":l,"Headers":s},(function(r,i){if(r)return n(r);e.UploadId=i.UploadId,o.emit("get_copy_data_finish",e)}))})),r.headObject({"Bucket":h,"Region":g,"Key":y},(function(i,a){if(i)i.statusCode&&404===i.statusCode?n(c.error(i,{"ErrorStatus":y+" Not Exist"})):n(i);else if(void 0!==(v=e.FileSize=a.headers["content-length"])&&v)if(k=c.throttleOnProgress.call(r,v,e.onProgress),v<=C)e.Headers["x-cos-metadata-directive"]||(e.Headers["x-cos-metadata-directive"]="Copy"),r.putObjectCopy(e,(function(e,o){if(e)return k(null,!0),n(e);k({"loaded":v,"total":v},!0),n(e,o)}));else{var s=a.headers,u={"Cache-Control":s["cache-control"],"Content-Disposition":s["content-disposition"],"Content-Encoding":s["content-encoding"],"Content-Type":s["content-type"],"Expires":s.expires,"x-cos-storage-class":s["x-cos-storage-class"]};c.each(s,(function(e,n){0===n.indexOf("x-cos-meta-")&&n.length>"x-cos-meta-".length&&(u[n]=e)})),o.emit("get_file_size_finish",u)}else n(c.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）')))}))}else n(c.error(new Error("CopySource format error")))}};e.exports.init=function(e,n){n.transferToTaskMethod(u,"sliceUploadFile"),c.each(u,(function(n,o){e.prototype[o]=c.apiWrapper(o,n)}))}},"293":function(e,n){var o={"eachLimit":function eachLimit(e,n,o,r){if(r=r||function(){},!e.length||n<=0)return r();var i=0,a=0,s=0;!function replenish(){if(i>=e.length)return r();for(;s<n&&a<e.length;)s+=1,o(e[(a+=1)-1],(function(n){n?(r(n),r=function callback(){}):(s-=1,(i+=1)>=e.length?r():replenish())}))}()},"retry":function retry(e,n,o){e<1?o():function next(r){n((function(n,i){n&&r<e?next(r+1):o(n,i)}))}(1)}};e.exports=o},"411":function(e,n,o){"use strict";var r,i=new Uint8Array(16);function rng(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function validate(e){return"string"==typeof e&&a.test(e)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var l=function stringify(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(c[e[n+0]]+c[e[n+1]]+c[e[n+2]]+c[e[n+3]]+"-"+c[e[n+4]]+c[e[n+5]]+"-"+c[e[n+6]]+c[e[n+7]]+"-"+c[e[n+8]]+c[e[n+9]]+"-"+c[e[n+10]]+c[e[n+11]]+c[e[n+12]]+c[e[n+13]]+c[e[n+14]]+c[e[n+15]]).toLowerCase();if(!s(o))throw TypeError("Stringified UUID is invalid");return o};n.a=function v4(e,n,o){var r=(e=e||{}).random||(e.rng||rng)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){o=o||0;for(var i=0;i<16;++i)n[o+i]=r[i];return n}return l(r)}}}]);