(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"144":function(e,t,n){"use strict";n.d(t,"b",(function(){return p}));var a=n(5),o=n(10),r=n(11),c=n(20),i=n(15),l=n(16),s=n(6),u=n(26),d=n.n(u),_=n(142),m=function(e){Object(i.a)(ErrorBoundary,e);var t=Object(l.a)(ErrorBoundary);function ErrorBoundary(){var e;Object(o.a)(this,ErrorBoundary);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),Object(s.a)(Object(c.a)(e),"state",{"hasError":!1}),e}return Object(r.a)(ErrorBoundary,[{"key":"componentDidMount","value":function componentDidMount(){}},{"key":"componentDidCatch","value":function componentDidCatch(e,t){this.setState({"hasError":!0}),e.message="".concat(e.message," - componentStack: ").concat(t.componentStack),console.log("我是错误",e)}},{"key":"render","value":function render(){return this.state.hasError?"":this.props.children}}]),ErrorBoundary}(d.a.Component),p=function errorBoundary(e){return function(t){Object(i.a)(_class,t);var n=Object(l.a)(_class);function _class(){return Object(o.a)(this,_class),n.apply(this,arguments)}return Object(r.a)(_class,[{"key":"render","value":function render(){return Object(_.jsx)(m,{"children":Object(_.jsx)(e,Object(a.a)({},this.props))})}}]),_class}(d.a.PureComponent)};t.a=p},"149":function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(4),c=n(1),i=n(26),l=n(143),s=n(150),u=n.n(s),d=n(144),_=n(142);t.a=Object(d.b)((function Header(e){var t=e.content,n=void 0===t?{}:t,a=n.type,s=void 0===a?"":a,d=n&&n.title||"",m=n&&n.imageUrl||"",p=n&&n.backgroundColor||"",h=n&&n.prevIcon||"",f=n&&n.moreIcon||"",x=n&&n.moreText||"",b=n&&n.fizeColor||"",g=n&&n.moreTextColor||b||"",j=c.default.getCurrentInstance();Object(i.useEffect)((function(){Object(c.pageScrollTo)({"scrollTop":0})}),[]);var v=function(){var t=Object(r.a)(o.a.mark((function _callee(){return o.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(!e.content.goBackHandle){t.next=3;break}return e.content.goBackHandle(),t.abrupt("return");case 3:if(!j.router.path.includes("back=home")){t.next=6;break}return c.default.reLaunch({"url":"/pages/index/index"}),t.abrupt("return",!1);case 6:if(!window||!window.grounds||"/pages/index/index"!==j.router.path&&"/pages/my/index"!==j.router.path&&"/pages/found/index"!==j.router.path){t.next=10;break}window.ground.close(),t.next=22;break;case 10:if("share"!==s){t.next=14;break}c.default.reLaunch({"url":"/pages/index/index"}),t.next=22;break;case 14:return t.prev=14,t.next=17,c.default.navigateBack({"delta":1});case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(14),c.default.reLaunch({"url":"/pages/index/index"});case 22:case"end":return t.stop()}}),_callee,null,[[14,19]])})));return function h5GoBackHandle(){return t.apply(this,arguments)}}(),O=m?{"backgroundImage":"url(".concat(m,")")}:{"backgroundColor":p};return Object(_.jsx)(l.View,{"className":u.a.headerBox,"style":O,"children":Object(_.jsxs)(l.View,{"className":u.a.header,"style":O,"children":[Object(_.jsx)(l.View,{"className":u.a.headerPrev,"children":h&&Object(_.jsx)(l.Image,{"onClick":v,"src":h,"mode":"aspectFit","className":u.a.headerPrevPic})}),Object(_.jsx)(l.View,{"className":u.a.headerTitle,"children":Object(_.jsx)(l.Text,{"className":u.a.headerTitleText,"style":{"color":b},"children":d})}),Object(_.jsxs)(l.View,{"className":u.a.headerMore,"children":[f&&Object(_.jsx)(l.Image,{"src":f,"mode":"aspectFit","onClick":function moreIconHandle(){if(window&&window.grounds)try{window.grounds.openShare(location.href,"凤娱指数-影剧综榜单","凤凰新闻","https://x0.ifengimg.com/ucms/2021_50/42603B06AF7D0F555A12FC2E60ED0C61CFDB9709_size27_w432_h432.png","brand_mxdb01")}catch(e){try{window.grounds.openShare(location.href,"凤娱指数-影剧综榜单","凤凰新闻","https://x0.ifengimg.com/ucms/2021_50/42603B06AF7D0F555A12FC2E60ED0C61CFDB9709_size27_w432_h432.png","brand_mxdb01","")}catch(e){}}},"className":u.a.headerMorePic}),e.children,x&&Object(_.jsx)(l.Text,{"className":u.a.headerMoreText,"onClick":function moreTextHandle(){e.content.moreTextHandle()},"style":{"color":g},"children":x})]})]})})}))},"150":function(e,t,n){e.exports={"headerBox":"index-module__headerBox___1_u1D","headerBoxWx":"index-module__headerBoxWx___3wJqw","header":"index-module__header___6NxCV","headerWx":"index-module__headerWx___3y-VP","headerPrev":"index-module__headerPrev___12MB1","headerPrevPic":"index-module__headerPrevPic___212ke","headerTitle":"index-module__headerTitle___25jwe","headerTitleText":"index-module__headerTitleText___3LAcX","headerMore":"index-module__headerMore___2nNrE","headerMorePic":"index-module__headerMorePic___ydU02","headerMoreText":"index-module__headerMoreText___fvvfk"}},"202":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={"statusCode":200,"header":{"cache-control":"max-age=120","content-length":"2719","content-type":"application/json; charset=utf-8","expires":"Thu, 23 Jun 2022 11:56:34 GMT","last-modified":"Thu, 23 Jun 2022 11:54:34 GMT"},"data":{"code":200,"level":200,"message":"success","description":"","data":[{"listId":"6942453087697117255","title":"剋可爱","coverImageUrl":"https://x0.ifengimg.com/ucms/2022_25/F48F7E1F75EF0171B85F441E65171F47F4A1C979_size25_w300_h300.jpg","description":"可爱","type":1,"defaultFlag":0,"visibility":1,"auditStatus":100,"onlineStatus":1,"createTimeLong":1655274747e3,"updateTimeLong":1655274754e3,"followTotal":4,"dramaTotal":3,"creatorId":"6816546784735662149","operator":"jiajx3","containFlag":null,"commentTotal":3,"userAvatar":"https://x0.ifengimg.com/ucms/2021_28/FA2C4EB57408EBCFD81FD2B58CFC9E383FD14EE3_size101_w601_h732.jpg","nickName":"马保国","userDescription":"混元形太极掌门人，武术大师，松果谭抖闪电鞭创始人","followFlag":null}],"succeed":!0,"msg":"success"}}},"223":function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h}));var a,o,r=n(0),c=n.n(r),i=n(4),l=(n(14),n(13)),s=n(1),u=(n(411),n(230)),d=(n(21),n(202)),_=Object(s.getStorageSync)("token")||(null===(a=window.grounds)||void 0===a||null===(o=a.getUserInfo())||void 0===o?void 0:o.getToken());_=_?"Bearer ".concat(_):"",console.log("当前token为",_);new u.Core(function newCors(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initFail;return{"appid":"ifeng-circle","token":"4E408248696480382C41446CE943ED98","apiUrl":"https://skserver.ifeng.com/cos/getCredential","initFail":t}}());var m=function(){var e=Object(i.a)(c.a.mark((function _callee12(e){var t,n;return c.a.wrap((function _callee12$(a){for(;;)switch(a.prev=a.next){case 0:return e.args,t=d.default.data,n={},t&&200===t.code&&t.data&&(n=t.data[0]),a.abrupt("return",n);case 5:case"end":return a.stop()}}),_callee12)})));return function batchGetListContent(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(i.a)(c.a.mark((function _callee13(e){var t,n;return c.a.wrap((function _callee13$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.e)({"method":"DELETE","header":{"content-type":"application/x-www-form-urlencoded","Authorization":_},"url":l.c+"/wind-vane-portal/user/list/deleteListContent/".concat(e)});case 2:return t=a.sent,n=t.data,a.abrupt("return",n);case 5:case"end":return a.stop()}}),_callee13)})));return function deleteListContent(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(c.a.mark((function _callee14(e){var t,n;return c.a.wrap((function _callee14$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.e)({"method":"POST","data":{"body":e},"header":{"content-type":"application/json","Authorization":_},"url":l.c+"/wind-vane-portal/user/list/updateListContent"});case 2:return t=a.sent,n=t.data,a.abrupt("return",n);case 5:case"end":return a.stop()}}),_callee14)})));return function updateListContent(t){return e.apply(this,arguments)}}()},"353":function(e,t,n){e.exports={"pagebody":"index-module__pagebody___2VEek","formbox":"index-module__formbox___2Kp_7","editInfoItem":"index-module__editInfoItem___2jKbm","editInfoNameL":"index-module__editInfoNameL___2Zs4Q","editInfoText":"index-module__editInfoText___rJk6k","changePosterR":"index-module__changePosterR___1RUdL","changePosterName":"index-module__changePosterName___1iKu1","changePosterInfo":"index-module__changePosterInfo___fxni3","TextNum":"index-module__TextNum___3l1vV","editInfoInputIcon":"index-module__editInfoInputIcon___3eLGk","changePosterWrap":"index-module__changePosterWrap___3XO65","changePosterItem":"index-module__changePosterItem___2c4P7","changePosterImg":"index-module__changePosterImg___1mhfx","editInfoInput":"index-module__editInfoInput___3D24f","editInfoSwitch":"index-module__editInfoSwitch___2RuEw","maskTop":"index-module__maskTop___Bq6PQ","maskBottom":"index-module__maskBottom___3qTDz","btn":"index-module__btn___2D2WP"}},"354":function(e,t,n){e.exports={"editer":"index-module__editer___1W9oh","croppedImg":"index-module__croppedImg___ALpW1","wrap":"index-module__wrap___sRolc","mask":"index-module__mask___2Jw70","maskTop":"index-module__maskTop___2vf_F","maskBottom":"index-module__maskBottom___1_08G","image":"index-module__image___aadBl","title":"index-module__title___2O_GO"}},"358":function(e,t,n){e.exports={"editInfoItem":"index-module__editInfoItem___3KmuG","lastEditItem":"index-module__lastEditItem___2YpcA","editInfoNameL":"index-module__editInfoNameL___33tD-","editInfoText":"index-module__editInfoText___1MYwY","changePosterName":"index-module__changePosterName___2v1bU","TextNum":"index-module__TextNum___3GF0h","editInfoInput":"index-module__editInfoInput___26wNy","editInfoInputIcon":"index-module__editInfoInputIcon___Hr1or","editInfoSwitch":"index-module__editInfoSwitch___3KKCk"}},"359":function(e,t,n){e.exports={"examineButton":"index-module__examineButton___3FLHk","examine":"index-module__examine___3lxhM","delectOpusButton":"index-module__delectOpusButton___1-RfK","saveButton":"index-module__saveButton___2McSl","fail":"index-module__fail___189fn","failImg":"index-module__failImg___2VyOK"}},"360":function(e,t,n){e.exports=n.p+"static/images/Fail.3668137865a0f7aaf7d0dded5b5f7800.png"},"361":function(e,t,n){e.exports={"changePosterR":"index-module__changePosterR___2ZaLf","changePosterImg":"index-module__changePosterImg___1TKWs"}},"408":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return EditInfo}));var a=n(5),o=n(0),r=n.n(o),c=n(4),i=n(12),l=n(26),s=n(1),u=n(143),d=n(353),_=n.n(d),m=n(149),p=n(354),h=n.n(p),f=n(144),x=n(355),b=(n(357),n(142)),g=Object(f.b)((function ImgEditor(e){var t=Object(l.useRef)(null),n=Object(l.useState)(""),a=Object(i.a)(n,2),o=(a[0],a[1],function handleClose(){null==e||e.onClose()});return Object(b.jsxs)(u.View,{"className":h.a.wrap,"children":[Object(b.jsx)(u.View,{"className":h.a.editer,"children":Object(b.jsx)(x.a,{"src":null==e?void 0:e.url,"style":{"height":window.innerHeight,"width":window.innerWidth},"aspectRatio":1,"guides":!1,"center":!1,"ref":t,"viewMode":1,"dragMode":"move","background":!1,"cropBoxMovable":!1,"cropBoxResizable":!1,"zoomOnWheel":!0,"zoomOnTouch":!0,"minCropBoxWidth":window.innerWidth})}),Object(b.jsxs)(u.View,{"className":h.a.title,"children":[Object(b.jsx)(u.View,{"onClick":o,"children":"取消"}),Object(b.jsx)(u.View,{"onClick":function handleSave(){var n,a=null==t?void 0:t.current,r=null==a?void 0:a.cropper;null==r||null===(n=r.getCroppedCanvas())||void 0===n||n.toDataURL();null==e||e.updateImg(null==e?void 0:e.url),setTimeout((function(){o()}),300)},"children":"选取"})]})]})})),j=n(223),v=n(45),O=n(358),w=n.n(O),I=function InputItem(e){var t=e.label,n=void 0===t?"昵称":t,a=e.initValue,o=void 0===a?"":a,r=e.maxlength,c=void 0===r?10:r,d=e.change,_=e.name,m=e.switchFlag,p=void 0!==m&&m,h=Object(l.useState)(o),f=Object(i.a)(h,2),x=f[0],g=f[1],j=Object(l.useState)(!1),O=Object(i.a)(j,2),I=O[0],k=O[1];Object(l.useEffect)((function(){var t=e.initValue;g(void 0===t?"":t)}),[e]);return Object(b.jsxs)(u.View,{"className":w.a.editInfoItem,"children":[Object(b.jsx)(u.View,{"className":w.a.editInfoNameL,"children":Object(b.jsx)(u.Text,{"className":w.a.editInfoText,"children":n})}),p?Object(b.jsx)(u.View,{"className":w.a.openOpusR,"children":Object(b.jsx)(u.Switch,{"className":w.a.editInfoSwitch,"checked":1===x,"onChange":function onSwitchInput(e){var t=e.detail.value?1:2;g(t),d&&d(t,_)}})}):Object(b.jsxs)(u.View,{"className":w.a.changePosterName,"children":[Object(b.jsx)(u.Input,{"value":x.substr(0,c),"placeholder":"无","onFocus":function onFocus(){k(!0)},"onBlur":function onBlur(){k(!1)},"className":w.a.editInfoInput,"onInput":Object(v.a)((function onNameInput(e){var t=e.target.value;t.length>c&&(Object(s.showToast)({"title":"最多输入".concat(c,"个字"),"icon":"none"}),t=t.substr(0,c)),g(t),d&&d(t,_)}),500),"maxlength":c+1}),I?Object(b.jsxs)(u.View,{"className":w.a.TextNum,"children":["".concat(x.length),"/",c]}):Object(b.jsx)(u.Image,{"className":w.a.editInfoInputIcon,"src":"https://x0.ifengimg.com/ucms/2022_22/B9C762DD2B70DC8B4E28A0972E7707C51E0190A6_size1_w48_h48.png"})]})]})},k=n(359),y=n.n(k),P=n(360),C=n.n(P),N=function Content(e){var t=e.examine,n=(e.listId,e.info),a=function(){var e=Object(c.a)(r.a.mark((function _callee(){return r.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:Object(v.e)("/pages/my/index?tab=1","close");case 1:case"end":return e.stop()}}),_callee)})));return function h5GoBackHandle(){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(r.a.mark((function _callee2(){var e,t,o,c,i,l,u;return r.a.wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,l={"listId":null==n?void 0:n.listId,"content":{"description":null==n||null===(e=n.content)||void 0===e?void 0:e.description,"source":null==n||null===(t=n.content)||void 0===t?void 0:t.source,"title":null==n||null===(o=n.content)||void 0===o?void 0:o.title,"visibility":null==n||null===(c=n.content)||void 0===c?void 0:c.visibility,"coverImageUrl":null==n||null===(i=n.content)||void 0===i?void 0:i.coverImageUrl}},r.next=4,Object(j.c)(l);case 4:u=r.sent,console.log("更新片单",u),Object(s.showToast)({"title":"修改成功","icon":"none","duration":1e3,"success":function success(){a()}}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),_callee2,null,[[0,9]])})));return function moreTextHandle(){return e.apply(this,arguments)}}();return Object(b.jsxs)(u.View,{"children":[22===t?Object(b.jsx)(u.View,{"children":Object(b.jsx)(u.View,{"className":"".concat(y.a.examineButton),"children":"审核中..."})}):Object(b.jsx)(u.View,{"children":Object(b.jsx)(u.View,{"className":"".concat(y.a.saveButton),"onClick":o,"children":"保存"})}),44===t&&Object(b.jsx)(u.View,{"className":y.a.fail,"children":Object(b.jsx)(u.Image,{"src":C.a,"className":y.a.failImg})})]})},F=n(361),B=n.n(F),V=n(14),E=n(10),S=n(11),A=n(20),M=n(15),D=n(16),L=n(6),U=n(230),H=n(21),R=function UploadH5(e){return function(t){Object(M.a)(T,t);var n=Object(D.a)(T);function T(){var e;Object(E.a)(this,T);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(L.a)(Object(A.a)(e),"state",{"imgPath":[],"VideoPath":[],"uploadImgPathArray":[],"uploadVideoPathArray":[],"processArray":[]}),Object(L.a)(Object(A.a)(e),"events",new s.default.Events),Object(L.a)(Object(A.a)(e),"uploadCore",null),Object(L.a)(Object(A.a)(e),"convertObjectUrlToBlob",(function(e){return new Promise((function(t,n){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="blob",a.onload=function(){200===this.status?t(this.response):n({"status":this.status})},a.send()}))})),Object(L.a)(Object(A.a)(e),"choose",function(){var t=Object(c.a)(r.a.mark((function _callee(t,n,a,o){var c,i,l,u,d,_,m,p,h;return r.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(!n){r.next=17;break}return r.prev=1,r.next=4,Object(s.chooseImage)({"count":a||9,"sourceType":Object(V.a)(t)});case 4:if(c=r.sent,i=c.tempFiles,l=c.tempFilePaths,u=void 0===l?[]:l,!o){r.next=9;break}if(!e.isHasMaxFile(i,o)){r.next=9;break}return r.abrupt("return",!1);case 9:e.uploadAll(n,i,u),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(1),console.log(r.t0);case 15:r.next=33;break;case 17:return r.prev=17,r.next=20,Object(s.chooseVideo)({"sourceType":Object(V.a)(t),"compressed":!0});case 20:if(d=r.sent,_=d.tempFiles,m=d.tempFilePaths,!o){r.next=25;break}if(!e.isHasMaxFile(_,o)){r.next=25;break}return r.abrupt("return",!1);case 25:h=[],_.length&&(p=_.filter((function(e,t){return console.log(e,t),"image/png"!==e.type&&"image/jpeg"!==e.type&&(h.push(m[t]),!0)}))),p.length&&e.uploadAll(n,p,h),r.next=33;break;case 30:r.prev=30,r.t1=r.catch(17),console.log(r.t1);case 33:case"end":return r.stop()}}),_callee,null,[[1,12],[17,30]])})));return function(e,n,a,o){return t.apply(this,arguments)}}()),Object(L.a)(Object(A.a)(e),"isHasMaxFile",(function(t,n){if(!t)return!1;for(var a=0,o=t.length;a<o;a++){if((t[a]&&t[a].size||0)>(n||104857600))return e.events.trigger("hasMaxFile"),!0}return!1})),Object(L.a)(Object(A.a)(e),"uploadAll",function(){var t=Object(c.a)(r.a.mark((function _callee3(t,n,a){var o,i,l,s,u,d,_,m;return r.a.wrap((function _callee3$(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,e.events.trigger("starUpload"),o=n.map(function(){var t=Object(c.a)(r.a.mark((function _callee2(t){var n;return r.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.convertObjectUrlToBlob(t.path);case 2:return n=a.sent,a.abrupt("return",new Promise((function(a,o){try{t.size>10485760?e.uploadCore.uploadBigFile({"file":n,"success":function success(e){a(e.sourcePath)},"error":function error(e){console.error("上传出错啦",e),o(0)}}):e.uploadCore.uploadFile({"file":n,"success":function success(e){a(e.sourcePath)},"error":function error(e){console.error("上传出错啦",e),o(0)}})}catch(e){console.log(e),o(0)}})));case 4:case"end":return a.stop()}}),_callee2)})));return function(e){return t.apply(this,arguments)}}()),p.next=5,Object(H.a)(o);case 5:i=p.sent,l=[],s=[],i.forEach((function(e,t){e.value?l.push(a[t]):s.push(a[t])})),u=e.state.uploadImgPathArray,d=e.state.uploadVideoPathArray,_=e.state.imgPath,m=e.state.VideoPath,t?(u=u.concat(i.filter((function(e){return e.value})).map((function(e){return e.value}))),_=_.concat(l)):(d=d.concat(i.filter((function(e){return e.value})).map((function(e){return e.value}))),m=m.concat(l)),e.setState({"imgPath":_,"VideoPath":m,"uploadImgPathArray":u,"uploadVideoPathArray":d}),e.events.trigger("uploadFinish",u,d,s),e.events.trigger("endUpload"),p.next=22;break;case 19:p.prev=19,p.t0=p.catch(0),console.log(p.t0);case 22:case"end":return p.stop()}}),_callee3,null,[[0,19]])})));return function(e,n,a){return t.apply(this,arguments)}}()),Object(L.a)(Object(A.a)(e),"deleteImg",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1===n){var a=e.state.imgPath,o=e.state.uploadImgPathArray;a.splice(t,1),o.splice(t,1),e.setState({"imgPath":a,"uploadImgPathArray":o})}else{var r=e.state.VideoPath,c=e.state.uploadVideoPathArray;r.splice(t,1),c.splice(t,1),e.setState({"VideoPath":r,"uploadVideoPathArray":c})}})),e}return Object(S.a)(T,[{"key":"componentDidMount","value":function componentDidMount(){var e=Object(s.getStorageSync)("token");this.uploadCore=new U.Core({"appid":"ifeng-wind-vane","token":e,"apiUrl":"https://skserver.ifeng.com/cos/getCredential","initFail":function initFail(e){throw console.error("error",e),new Error(e)}})}},{"key":"render","value":function render(){var t=this.state,n=t.uploadImgPathArray,o=t.imgPath,r=t.VideoPath,c=t.processArray,i=t.uploadVideoPathArray;return Object(b.jsx)(u.View,{"children":Object(b.jsx)(e,Object(a.a)(Object(a.a)({"choose":this.choose,"imgPath":o,"VideoPath":r,"uploadImgPathArray":n,"deleteImg":this.deleteImg},this.props),{},{"processArray":c,"uploadVideoPathArray":i,"events":this.events}))})}}]),T}(l.Component)}((function Content(e){var t=e.value,n=e.choose,a=e.events,o=e.getUploadHandle;Object(l.useEffect)((function(){var e=null;a.on("hasMaxFile",(function(){Object(s.showToast)({"title":"您上传的图片超过5M或者视频超过100M","icon":"none","duration":2e3})})),a.on("starUpload",(function(){Object(s.showLoading)({"title":"上传中","mask":!0}),clearTimeout(e),e=setTimeout((function(){Object(s.hideLoading)(),Object(s.showToast)({"title":"上传已超时，请重新上传","icon":"none","duration":1e3})}),5e3)})),a.on("endUpload",(function(){clearTimeout(e),Object(s.hideLoading)()})),a.on("uploadFinish",(function(e,t){t&&t.length>0&&Object(s.showToast)({"title":"您上传的文件失败，请重新上传！","icon":"none","duration":1e3});var n=e.slice(-1);console.log("uploadImgPathArray",n),o&&o(n)}))}),[]);return Object(b.jsx)(u.View,{"className":B.a.changePosterR,"children":Object(b.jsx)(u.Image,{"id":"image","className":B.a.changePosterImg,"mode":"aspectFill","src":t||"","onClick":function uploadImg(){n(["album"],1,5242880)}})})}));function EditInfo(){var e,t,n,o,d=s.default.useRouter().params.listId,p=void 0===d?"":d,h=Object(l.useState)({}),f=Object(i.a)(h,2),x=f[0],O=f[1],w=Object(l.useState)({}),k=Object(i.a)(w,2),y=k[0],P=k[1],C=Object(l.useState)(),F=Object(i.a)(C,2),B=F[0],V=F[1],E=Object(l.useState)(!1),S=Object(i.a)(E,2),A=S[0],M=S[1],D=Object(l.useState)(""),L=Object(i.a)(D,2),U=L[0],H=L[1],z=function(){var e=Object(c.a)(r.a.mark((function _callee(){var e,t,n;return r.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e={"userFlag":!1,"listIds":[p],"followFlag":!1,"dramaTotalFlag":!1,"followTotalFlag":!1,"commentTotalFlag":!1},a.next=4,Object(j.a)({"args":e});case 4:t=a.sent,V(null==t?void 0:t.auditStatus),n={"listId":p,"content":{"description":null==t?void 0:t.description,"source":"h5","title":null==t?void 0:t.title,"visibility":null==t?void 0:t.visibility,"coverImageUrl":null==t?void 0:t.coverImageUrl}},O(n),P(n),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0);case 14:case"end":return a.stop()}}),_callee,null,[[0,11]])})));return function fetchData(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){z()}),[]);var W=function(){var e=Object(c.a)(r.a.mark((function _callee2(){return r.a.wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:Object(v.e)("/pages/my/index?tab=1","close");case 1:case"end":return e.stop()}}),_callee2)})));return function h5GoBackHandle(){return e.apply(this,arguments)}}(),$={"title":"编辑资料","prevIcon":"https://x0.ifengimg.com/fe/ifengVane/icon_back.png","fizeColor":"#000","backgroundColor":"#ffffff","moreTextColor":"#9E9E9E","goBackHandle":function goBackHandle(){var e=null==y?void 0:y.content,t=null==x?void 0:x.content;for(var n in e)if(e[n]!==t[n])return console.log("noSave"),void Object(s.showModal)({"content":"有未确认的修改，离开不会保存","cancelColor":"#9E9E9E","cancelText":"取消","confirmText":"确认离开","confirmColor":"#F54343","success":function success(e){e.confirm?(console.log("用户点击确定"),W()):e.cancel&&console.log("用户点击取消")}});W()}},G=function onNameInput(e,t){var n=JSON.parse(JSON.stringify(y));n.content[t]=e,P(Object(a.a)({},n))},J=function(){var e=Object(c.a)(r.a.mark((function _callee3(){var e,t=arguments;return r.a.wrap((function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:(e=t.length>0&&void 0!==t[0]?t[0]:[])[0]&&(H(e[0]),setTimeout((function(){M(!0)}),300));case 2:case"end":return n.stop()}}),_callee3)})));return function UploadImg(){return e.apply(this,arguments)}}(),K=function(){var e=Object(c.a)(r.a.mark((function _callee4(e){var t;return r.a.wrap((function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:console.log("url",e),(t=JSON.parse(JSON.stringify(y))).content.coverImageUrl=e,P(Object(a.a)({},t));case 4:case"end":return n.stop()}}),_callee4)})));return function updateImg(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(u.View,{"className":_.a.editInfo,"children":[Object(b.jsx)(m.a,{"content":$}),Object(b.jsxs)(u.View,{"className":_.a.pagebody,"children":[Object(b.jsxs)(u.View,{"className":_.a.formbox,"children":[Object(b.jsxs)(u.View,{"className":_.a.editInfoItem,"children":[Object(b.jsx)(u.View,{"className":_.a.editInfoNameL,"children":Object(b.jsx)(u.Text,{"className":_.a.editInfoText,"children":"更换封面"})}),Object(b.jsx)(R,{"value":null==y||null===(e=y.content)||void 0===e?void 0:e.coverImageUrl,"getUploadHandle":J})]}),Object(b.jsx)(I,{"label":"昵称","initValue":(null==y||null===(t=y.content)||void 0===t?void 0:t.title)||"","maxlength":18,"change":G,"name":"title"}),Object(b.jsx)(I,{"label":"简介","initValue":(null==y||null===(n=y.content)||void 0===n?void 0:n.description)||"","maxlength":30,"change":G,"name":"description"}),Object(b.jsx)(I,{"label":"公开我的片单","initValue":(null==y||null===(o=y.content)||void 0===o?void 0:o.visibility)||"","change":G,"name":"visibility","switchFlag":!0})]}),Object(b.jsx)(N,{"examine":B,"listId":p,"info":y})]}),U&&A&&Object(b.jsx)(g,{"url":U,"onClose":function onClose(){H("")},"updateImg":K}),Object(b.jsx)(u.View,{})]})}}}]);